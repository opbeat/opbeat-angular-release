!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("error-stack-parser",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){"use strict";function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o]);return r}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],o=0;o<e.length;o++)t.call(n,e[o])&&r.push(e[o]);return r}var r=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(o))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),n=t.pop(),r=t[t.length-1];if(!isNaN(parseFloat(r))&&isFinite(r)){var o=t.pop();return[t.join(":"),o,n]}return[t.join(":"),n,void 0]},parseV8OrIE:function(r){var i=n(r.stack.split("\n"),function(e){return!!e.match(o)},this);return t(i,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),o=n.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e(o,void 0,i,r[1],r[2],t)},this)},parseFFOrSafari:function(r){var o=n(r.stack.split("\n"),function(e){return!e.match(i)},this);return t(o,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e(o,void 0,r[0],r[1],r[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;a>i;i+=2){var s=n.exec(r[i]);s&&o.push(new e(void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;a>i;i+=2){var s=n.exec(r[i]);s&&o.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,r[i]))}return o},parseOpera11:function(o){var i=n(o.stack.split("\n"),function(e){return!!e.match(r)&&!e.match(/^Error created at/)},this);return t(i,function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(a,s,o[0],o[1],o[2],t)},this)}}})}).call(this,void 0)},{stackframe:7}],2:[function(e,t,n){(function(n,r,o){(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function c(e){W=e}function u(e){K=e}function l(){return function(){n.nextTick(g)}}function p(){return function(){q(g)}}function f(){var e=0,t=new Q(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(g,1)}}function g(){for(var e=0;G>e;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}G=0}function v(){try{var t=e,n=t("vertx");return q=n.runOnLoop||n.runOnContext,p()}catch(r){return d()}}function m(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return ae.error=t,ae}}function _(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function k(e,t,n){K(function(e){var r=!1,o=_(n,t,function(n){r||(r=!0,t!==n?x(e,n):O(e,n))},function(t){r||(r=!0,F(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,F(e,o))},e)}function T(e,t){t._state===oe?O(e,t._result):t._state===ie?F(e,t._result):P(t,void 0,function(t){x(e,t)},function(t){F(e,t)})}function S(e,t){if(t.constructor===e.constructor)T(e,t);else{var n=w(t);n===ae?F(e,ae.error):void 0===n?O(e,t):a(n)?k(e,t,n):O(e,t)}}function x(e,t){e===t?F(e,y()):i(t)?S(e,t):O(e,t)}function E(e){e._onerror&&e._onerror(e._result),C(e)}function O(e,t){e._state===re&&(e._result=t,e._state=oe,0!==e._subscribers.length&&K(C,e))}function F(e,t){e._state===re&&(e._state=ie,e._result=t,K(E,e))}function P(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+oe]=n,o[i+ie]=r,0===i&&e._state&&K(C,e)}function C(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?I(n,r,o,i):o(i);e._subscribers.length=0}}function N(){this.error=null}function j(e,t){try{return e(t)}catch(n){return se.error=n,se}}function I(e,t,n,r){var o,i,s,c,u=a(n);if(u){if(o=j(n,r),o===se?(c=!0,i=o.error,o=null):s=!0,t===o)return void F(t,b())}else o=r,s=!0;t._state!==re||(u&&s?x(t,o):c?F(t,i):e===oe?O(t,o):e===ie&&F(t,o))}function L(e,t){try{t(function(t){x(e,t)},function(t){F(e,t)})}catch(n){F(e,n)}}function D(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(m),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?O(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&O(n.promise,n._result))):F(n.promise,n._validationError())}function R(e){return new ce(this,e).promise}function z(e){function t(e){x(o,e)}function n(e){F(o,e)}var r=this,o=new r(m);if(!V(e))return F(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,a=0;o._state===re&&i>a;a++)P(r.resolve(e[a]),void 0,t,n);return o}function A(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return x(n,e),n}function M(e){var t=this,n=new t(m);return F(n,e),n}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e){this._id=he++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==e&&(a(e)||Z(),this instanceof $||H(),L(this,e))}function B(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=de)}var U;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q,W,X,V=U,G=0,K=({}.toString,function(e,t){ne[G]=e,ne[G+1]=t,G+=2,2===G&&(W?W(g):X())}),J="undefined"!=typeof window?window:void 0,Y=J||{},Q=Y.MutationObserver||Y.WebKitMutationObserver,ee="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3);X=ee?l():Q?f():te?h():void 0===J&&"function"==typeof e?v():d();var re=void 0,oe=1,ie=2,ae=new N,se=new N;D.prototype._validateInput=function(e){return V(e)},D.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},D.prototype._init=function(){this._result=new Array(this.length)};var ce=D;D.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===re&&t>o;o++)e._eachEntry(r[o],o)},D.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;s(e)?e.constructor===r&&e._state!==re?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},D.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===re&&(r._remaining--,e===ie?F(o,n):r._result[t]=n),0===r._remaining&&O(o,r._result)},D.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){n._settledAt(oe,t,e)},function(e){n._settledAt(ie,t,e)})};var ue=R,le=z,pe=A,fe=M,he=0,de=$;$.all=ue,$.race=le,$.resolve=pe,$.reject=fe,$._setScheduler=c,$._setAsap=u,$._asap=K,$.prototype={constructor:$,then:function(e,t){var n=this,r=n._state;if(r===oe&&!e||r===ie&&!t)return this;var o=new this.constructor(m),i=n._result;if(r){var a=arguments[r-1];K(function(){I(r,o,a,i)})}else P(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var ge=B,ve={Promise:de,polyfill:ge};"function"==typeof o&&o.amd?o(function(){return ve}):"undefined"!=typeof t&&t.exports?t.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),ge()}).call(this)}).call(this,void 0,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},void 0)},{}],3:[function(e,t,n){(function(n){!function(r,o){"use strict";"object"==typeof t&&t.exports&&"function"==typeof e?t.exports=o():"function"==typeof n&&"object"==typeof n.amd?n(o):r.log=o()}(this,function(){"use strict";function e(e){return typeof console===s?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<c.length;n++){var r=c[n];this[r]=e>n?a:this.methodFactory(r,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function i(e,t,n){function i(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[p]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(p)+"="+t+";"}catch(n){}}function a(){var e;try{e=window.localStorage[p]}catch(t){}if(typeof e===s)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(p)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===l.levels[e]&&(e=void 0),e}var u,l=this,p="loglevel";e&&(p+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||o,l.getLevel=function(){return u},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return u=t,n!==!1&&i(t),r.call(l,t,e),typeof console===s&&t<l.levels.SILENT?"No console available for logging":void 0},l.setDefaultLevel=function(e){a()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var f=a();null==f&&(f=null==t?"WARN":t),l.setLevel(f,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],u=new i,l={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new i(e,u.getLevel(),u.methodFactory)),t};var p=typeof window!==s?window.log:void 0;return u.noConflict=function(){return typeof window!==s&&window.log===u&&(window.log=p),u},u})}).call(this,void 0)},{}],4:[function(e,t,n){t.exports=e("./lib/simple_lru.js")},{"./lib/simple_lru.js":5}],5:[function(e,t,n){"use strict";function r(e,t,n,r){this.before=e,this.next=t,this.key=n,this.value=r}function o(e){e||(e={}),this.maxSize=e.maxSize,this.reset()}r.prototype.setKey=function(e){this.key=e},r.prototype.setValue=function(e){this.value=e},o.prototype.reset=function(){this.size=0,this.cache={},this.tail=void 0,this.head=void 0},o.prototype.get=function(e,t){var n=this.cache[e];return t=void 0!=t&&null!=t?t:!0,n&&t?(this.hit(n),n.value):void 0},o.prototype.set=function(e,t,n){var o=this.cache[e];if(n=void 0!=n&&null!=n?n:!0,o)o.value=t,n&&this.hit(o);else{var i;if(this.size>=this.maxSize){var a=this.tail.key;this.detach(this.tail),i=this.cache[a],delete this.cache[a],i.next=void 0,i.before=void 0,i.setKey(e),i.setValue(t)}i=i?i:new r(void 0,void 0,e,t),this.cache[e]=i,this.attach(i)}},o.prototype.del=function(e){var t=this.cache[e];t&&(this.detach(t),delete this.cache[e])},o.prototype.hit=function(e){this.detach(e),this.attach(e)},o.prototype.attach=function(e){e&&(e.before=void 0,e.next=this.head,this.head=e,e.next?e.next.before=e:this.tail=e,this.size++)},o.prototype.detach=function(e){if(e){var t=e.before,n=e.next;t?t.next=n:this.head=n,n?n.before=t:this.tail=t,this.size--}},o.prototype.forEach=function(e){var t=this;Object.keys(this.cache).forEach(function(n){var r=t.cache[n];e(r.value,n)})},t.exports=o},{}],6:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("stack-generator",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var o=arguments.callee;o&&n.length<r;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new e(RegExp.$1||void 0,i)):n.push(new e(void 0,i));try{o=o.caller}catch(s){break}}return n}}})}).call(this,void 0)},{stackframe:7}],7:[function(e,t,n){(function(e){!function(r,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?t.exports=o():r.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,o,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+r+o+i}},t})}).call(this,void 0)},{}],8:[function(e,t,n){(function(e){!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";function t(e){function t(e){var t=e[g];return t}function n(e){var t=e.data;t.target.addEventListener("readystatechange",function(){t.target.readyState===t.target.DONE&&(t.aborted||e.invoke())});var n=t.target[g];return n||(t.target[g]=e),i.apply(t.target,t.args),e}function r(){}function o(e){var t=e.data;return t.aborted=!0,a.apply(t.target,t.args)}var i=c.patchMethod(e.XMLHttpRequest.prototype,"send",function(){return function(e,t){var i=Zone.current,a={target:e,isPeriodic:!1,delay:null,args:t,aborted:!1};return i.scheduleMacroTask("XMLHttpRequest.send",r,a,n,o)}}),a=c.patchMethod(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,n){var r=t(e);if(r&&"string"==typeof r.type){if(null==r.cancelFn)return;r.zone.cancelTask(r)}}})}n(1);var r=n(2),o=n(4),i=n(5),a=n(6),s=n(8),c=n(3),u="set",l="clear",p=["alert","prompt","confirm"],f="undefined"==typeof window?e:window;s.patchTimer(f,u,l,"Timeout"),s.patchTimer(f,u,l,"Interval"),s.patchTimer(f,u,l,"Immediate"),s.patchTimer(f,"request","cancel","AnimationFrame"),s.patchTimer(f,"mozRequest","mozCancel","AnimationFrame"),s.patchTimer(f,"webkitRequest","webkitCancel","AnimationFrame");for(var h=0;h<p.length;h++){var d=p[h];c.patchMethod(f,d,function(e,t,n){return function(t,r){return Zone.current.run(e,f,r,n)}})}r.eventTargetPatch(f),a.propertyDescriptorPatch(f),c.patchClass("MutationObserver"),c.patchClass("WebKitMutationObserver"),c.patchClass("FileReader"),o.propertyPatch(),i.registerElementPatch(f),t(f);var g=c.zoneSymbol("xhrTask");f.navigator&&f.navigator.geolocation&&c.patchPrototype(f.navigator.geolocation,["getCurrentPosition","watchPosition"])}).call(t,function(){return this}())},function(e,t){(function(e){(function(e){function t(e){return"__zone_symbol__"+e}function n(){0==S&&0==_.length&&(e[m]?e[m].resolve(0)[y](i):e[v](i,0))}function r(e){n(),_.push(e)}function o(e){var t=e&&e.rejection;t&&console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0),console.error(e)}function i(){if(!k){for(k=!0;_.length;){var e=_;_=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(r){o(r)}}}for(;T.length;)for(var i=function(){var e=T.shift();try{e.zone.runGuarded(function(){throw e})}catch(t){o(t)}};T.length;)i();k=!1}}function a(e){return e&&e.then}function s(e){return e}function c(e){return j.reject(e)}function u(e,t){return function(n){l(e,t,n)}}function l(e,t,r){if(e[x]===F)if(r instanceof j&&r[x]!==F)p(r),l(e,r[x],r[E]);else if(a(r))r.then(u(e,t),u(e,!1));else{e[x]=t;var o=e[E];e[E]=r;for(var i=0;i<o.length;)f(e,o[i++],o[i++],o[i++],o[i++]);if(0==o.length&&t==C){e[x]=N;try{throw new Error("Uncaught (in promise): "+r)}catch(s){var c=s;c.rejection=r,c.promise=e,c.zone=h.current,c.task=h.currentTask,T.push(c),n()}}}return e}function p(e){if(e[x]===N){e[x]=C;for(var t=0;t<T.length;t++)if(e===T[t].promise){T.splice(t,1);break}}}function f(e,t,n,r,o){p(e);var i=e[x]?r||s:o||c;t.scheduleMicroTask(O,function(){try{l(n,!0,t.run(i,null,[e[E]]))}catch(r){l(n,!1,r)}})}if(e.Zone)throw new Error("Zone already loaded.");var h=function(){function e(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new d(this,this._parent&&this._parent._zoneDelegate,t)}return Object.defineProperty(e,"current",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentTask",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=this.getZoneWith(e);return t?t._properties[e]:void 0},e.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},e.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},e.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},e.prototype.run=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{b=o}},e.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o}},e.prototype.runTask=function(e,t,n){if(e.runCount++,e.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+e.zone.name+"; Execution: "+this.name+")");var r=w;w=e;var o=b;b=this;try{"macroTask"==e.type&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o,w=r}},e.prototype.scheduleMicroTask=function(e,t,n,r){return this._zoneDelegate.scheduleTask(this,new g("microTask",this,e,t,n,r,null))},e.prototype.scheduleMacroTask=function(e,t,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("macroTask",this,e,t,n,r,o))},e.prototype.scheduleEventTask=function(e,t,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("eventTask",this,e,t,n,r,o))},e.prototype.cancelTask=function(e){var t=this._zoneDelegate.cancelTask(this,e);return e.runCount=-1,e.cancelFn=null,t},e.__symbol__=t,e}(),d=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._hasTaskZS=n&&(n.onHasTask?n:t._hasTaskZS),this._hasTaskDlgt=n&&(n.onHasTask?t:t._hasTaskDlgt)}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new h(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this.zone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this.zone,e,t,n,r,o):t.apply(n,r)},e.prototype.handleError=function(e,t){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this.zone,e,t):!0},e.prototype.scheduleTask=function(e,t){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this.zone,e,t);if(t.scheduleFn)t.scheduleFn(t);else{if("microTask"!=t.type)throw new Error("Task is missing scheduleFn.");r(t)}return t}finally{e==this.zone&&this._updateTaskCount(t.type,1)}},e.prototype.invokeTask=function(e,t,n,r){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this.zone,e,t,n,r):t.callback.apply(n,r)}finally{e!=this.zone||"eventTask"==t.type||t.data&&t.data.isPeriodic||this._updateTaskCount(t.type,-1)}},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this.zone,e,t);else{if(!t.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");n=t.cancelFn(t)}return e==this.zone&&this._updateTaskCount(t.type,-1),n},e.prototype.hasTask=function(e,t){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this.zone,e,t)},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],o=n[e]=r+t;if(0>o)throw new Error("More tasks executed then were scheduled.");if(0==r||0==o){var i={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};try{this.hasTask(this.zone,i)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(e,t)}}},e}(),g=function(){function e(e,t,n,r,o,a,s){this.runCount=0,this.type=e,this.zone=t,this.source=n,this.data=o,this.scheduleFn=a,this.cancelFn=s,this.callback=r;var c=this;this.invoke=function(){S++;try{return t.runTask(c,this,arguments)}finally{1==S&&i(),S--}}}return e.prototype.toString=function(){return this.data&&"undefined"!=typeof this.data.handleId?this.data.handleId:this.toString()},e}(),v=t("setTimeout"),m=t("Promise"),y=t("then"),b=new h(null,null),w=null,_=[],k=!1,T=[],S=0,x=t("state"),E=t("value"),O="Promise.then",F=null,P=!0,C=!1,N=0,j=function(){function e(t){var n=this;if(!(n instanceof e))throw new Error("Must be an instanceof Promise.");n[x]=F,n[E]=[];try{t&&t(u(n,P),u(n,C))}catch(r){l(n,!1,r)}}return e.resolve=function(e){return l(new this(null),P,e)},e.reject=function(e){return l(new this(null),C,e)},e.race=function(e){function t(e){i&&(i=r(e))}function n(e){i&&(i=o(e))}for(var r,o,i=new this(function(e,t){r=e,o=t}),s=0,c=e;s<c.length;s++){var u=c[s];a(u)||(u=this.resolve(u)),u.then(t,n)}return i},e.all=function(e){function t(e){o&&r(e),o=null}for(var n,r,o=new this(function(e,t){n=e,r=t}),i=0,s=[],c=0,u=e;c<u.length;c++){var l=u[c];a(l)||(l=this.resolve(l)),l.then(function(e){return function(t){s[e]=t,i--,o&&!i&&n(s)}}(i),t),i++}return i||n(s),o},e.prototype.then=function(e,t){var n=new this.constructor(null),r=h.current;return this[x]==F?this[E].push(r,n,e,t):f(this,r,n,e,t),n},e.prototype["catch"]=function(e){return this.then(null,e)},e}(),I=e[t("Promise")]=e.Promise;if(e.Promise=j,I){var L=I.prototype,D=L[t("then")]=L.then;L.then=function(e,t){var n=this;return new j(function(e,t){D.call(n,e,t)}).then(e,t)}}return Promise[h.__symbol__("uncaughtPromiseErrors")]=T,e.Zone=h})("undefined"==typeof window?e:window)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){var t=[],n=e.wtf;n?t=i.split(",").map(function(e){return"HTML"+e+"Element"}).concat(a):e[s]?t.push(s):t=a;for(var r=0;r<t.length;r++){var c=e[t[r]];o.patchEventTargetMethods(c&&c.prototype)}}var o=n(3),i="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",a="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex".split(","),s="EventTarget";t.eventTargetPatch=r},function(t,n){(function(t){"use strict";function r(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function o(e,t){for(var n=e.constructor.name,o=function(o){var i=t[o],a=e[i];a&&(e[i]=function(e){return function(){return e.apply(this,r(arguments,n+"."+i))}}(a))},i=0;i<t.length;i++)o(i)}function i(e,t){var n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};delete n.writable,delete n.value;var r=t.substr(2),o="_"+t;n.set=function(e){if(this[o]&&this.removeEventListener(r,this[o]),"function"==typeof e){var t=function(t){var n;n=e.apply(this,arguments),void 0==n||n||t.preventDefault()};this[o]=t,this.addEventListener(r,t,!1)}else this[o]=null},n.get=function(){return this[o]||null},Object.defineProperty(e,t,n)}function a(e,t){var n=[];for(var r in e)"on"==r.substr(0,2)&&n.push(r);for(var o=0;o<n.length;o++)i(e,n[o]);if(t)for(var a=0;a<t.length;a++)i(e,"on"+t[a])}function s(e,t,n,r,o){var i=e[y];if(i)for(var a=0;a<i.length;a++){var s=i[a],c=s.data;if(c.handler===t&&c.useCapturing===r&&c.eventName===n)return o&&i.splice(a,1),s}return null}function c(e,t){var n=e[y];n||(n=e[y]=[]),n.push(t)}function u(e){var t=e.data;return c(t.target,e),t.target[_](t.eventName,e.invoke,t.useCapturing)}function l(e){var t=e.data;s(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.target[k](t.eventName,e.invoke,t.useCapturing)}function p(e,t){var n=t[0],r=t[1],o=t[2]||!1,i=e||m,a=null;"function"==typeof r?a=r:r&&r.handleEvent&&(a=function(e){return r.handleEvent(e)});var c=!1;try{c=r&&"[object FunctionWrapper]"===r.toString()}catch(p){return}if(!a||c)return i[_](n,r,o);var f=s(i,r,n,o,!1);if(f)return i[_](n,f.invoke,o);var h=Zone.current,d=i.constructor.name+".addEventListener:"+n,g={target:i,eventName:n,name:n,useCapturing:o,handler:r};h.scheduleEventTask(d,a,g,u,l)}function f(e,t){var n=t[0],r=t[1],o=t[2]||!1,i=e||m,a=s(i,r,n,o,!0);a?a.zone.cancelTask(a):i[k](n,r,o)}function h(e){return e&&e.addEventListener?(v(e,b,function(){return p}),v(e,w,function(){return f}),!0):!1}function d(e){var t=m[e];if(t){m[e]=function(){var n=r(arguments,e);switch(n.length){case 0:this[T]=new t;break;case 1:this[T]=new t(n[0]);break;case 2:this[T]=new t(n[0],n[1]);break;case 3:this[T]=new t(n[0],n[1],n[2]);break;case 4:this[T]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}};var n,o=new t(function(){});for(n in o)("XMLHttpRequest"!==e||"responseBlob"!==n)&&!function(t){"function"==typeof o[t]?m[e].prototype[t]=function(){return this[T][t].apply(this[T],arguments)}:Object.defineProperty(m[e].prototype,t,{set:function(n){"function"==typeof n?this[T][t]=Zone.current.wrap(n,e+"."+t):this[T][t]=n},get:function(){return this[T][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(m[e][n]=t[n])}}function g(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}function v(e,t,r){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var i,a=n.zoneSymbol(t);return o&&!(i=o[a])&&(i=o[a]=o[t],o[t]=g(t,r(i,a,t))),i}n.zoneSymbol=Zone.__symbol__;var m="undefined"==typeof window?t:window;n.bindArguments=r,n.patchPrototype=o,n.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,n.isNode="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),n.isBrowser=!n.isNode&&!n.isWebWorker&&!("undefined"==typeof window||!window.HTMLElement),n.patchProperty=i,n.patchOnProperties=a;var y=n.zoneSymbol("eventTasks"),b="addEventListener",w="removeEventListener",_=n.zoneSymbol(b),k=n.zoneSymbol(w);n.patchEventTargetMethods=h;var T=n.zoneSymbol("originalInstance");n.patchClass=d,n.createNamedFn=g,n.patchMethod=v}).call(n,function(){return this}())},function(e,t,n){"use strict";function r(){Object.defineProperty=function(e,t,n){if(i(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=a(e,t,n)),s(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=a(e,n,t[n])}),p(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=l(e,t);return i(e,t)&&(n.configurable=!1),n;
}}function o(e,t,n){var r=n.configurable;return n=a(e,t,n),s(e,t,n,r)}function i(e,t){return e&&e[f]&&e[f][t]}function a(e,t,n){return n.configurable=!0,n.configurable||(e[f]||u(e,f,{writable:!0,value:{}}),e[f][t]=!0),n}function s(e,t,n,r){try{return u(e,t,n)}catch(o){if(n.configurable)return"undefined"==typeof r?delete n.configurable:n.configurable=r,u(e,t,n);throw o}}var c=n(3),u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p=Object.create,f=c.zoneSymbol("unconfigurables");t.propertyPatch=r,t._redefineProperty=o},function(e,t,n){"use strict";function r(e){if(i.isBrowser&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,r){return r&&r.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(r.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(r.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),o._redefineProperty(r.prototype,e,n)):r.prototype[e]=Zone.current.wrap(r.prototype[e],t)}else r.prototype[e]&&(r.prototype[e]=Zone.current.wrap(r.prototype[e],t))}),t.apply(document,[e,r])}}}var o=n(4),i=n(3);t.registerElementPatch=r},function(e,t,n){"use strict";function r(e){if(!s.isNode){var t="undefined"!=typeof WebSocket;o()?(s.isBrowser&&s.patchOnProperties(HTMLElement.prototype,c),s.patchOnProperties(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(s.patchOnProperties(IDBIndex.prototype,null),s.patchOnProperties(IDBRequest.prototype,null),s.patchOnProperties(IDBOpenDBRequest.prototype,null),s.patchOnProperties(IDBDatabase.prototype,null),s.patchOnProperties(IDBTransaction.prototype,null),s.patchOnProperties(IDBCursor.prototype,null)),t&&s.patchOnProperties(WebSocket.prototype,null)):(i(),s.patchClass("XMLHttpRequest"),t&&a.apply(e))}}function o(){if(s.isBrowser&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{get:function(){return!0}});var t=new XMLHttpRequest,n=!!t.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{}),n}function i(){for(var e=function(e){var t=c[e],n="on"+t;document.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][u]&&(t=Zone.current.wrap(o[n],r),t[u]=o[n],o[n]=t),o=o.parentElement},!0)},t=0;t<c.length;t++)e(t)}var a=n(7),s=n(3),c="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" ");t.propertyDescriptorPatch=r;var u=s.zoneSymbol("unbound")},function(e,t,n){"use strict";function r(e){var t=e.WebSocket;e.EventTarget||o.patchEventTargetMethods(t.prototype),e.WebSocket=function(e,n){var r,i=arguments.length>1?new t(e,n):new t(e),a=Object.getOwnPropertyDescriptor(i,"onmessage");return a&&a.configurable===!1?(r=Object.create(i),["addEventListener","removeEventListener","send","close"].forEach(function(e){r[e]=function(){return i[e].apply(i,arguments)}})):r=i,o.patchOnProperties(r,["close","error","message","open"]),r};for(var n in t)e.WebSocket[n]=t[n]}var o=n(3);t.apply=r},function(e,t,n){"use strict";function r(e,t,n,r){function i(t){var n=t.data;return n.args[0]=t.invoke,n.handleId=s.apply(e,n.args),t}function a(e){return c(e.data.handleId)}var s=null,c=null;t+=r,n+=r,s=o.patchMethod(e,t,function(n){return function(o,s){if("function"==typeof s[0]){var c=Zone.current,u={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?s[1]||0:null,args:s},l=c.scheduleMacroTask(t,s[0],u,i,a);if(!l)return l;var p=l.data.handleId;return p.ref&&p.unref&&(l.ref=p.ref.bind(p),l.unref=p.unref.bind(p)),l}return n.apply(e,s)}}),c=o.patchMethod(e,n,function(t){return function(n,r){var o=r[0];o&&"string"==typeof o.type?(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&o.zone.cancelTask(o):t.apply(e,r)}})}var o=n(3);t.patchTimer=r}])}).call(this,void 0)},{}],9:[function(e,t,n){function r(e){function t(e){r||(r=o(n))}var n=e.services;n.configService.isPlatformSupported()?e.initialize():n.logger.warn("Platform is not supported.");var r=!1;s(e),r=o(n),a(n.zoneService,t)}function o(e){return i(e.transactionService,e.logger,e.configService,e.exceptionHandler)}var i=e("./ngOpbeat"),a=e("./patches/bootstrapPatch"),s=e("../common/patchCommon");t.exports=r},{"../common/patchCommon":20,"./ngOpbeat":10,"./patches/bootstrapPatch":12}],10:[function(e,t,n){function r(e,t,n){this.config=function(e){e&&t.setConfig(e)},this.version=t.get("VERSION"),this.install=function(){e.warn("$opbeatProvider.install is deprecated!")},this.$get=[function(){return{getConfig:function(){return t},captureException:function(t,r){return t instanceof Error?void n.processError(t,r):void e.warn("Can't capture exception. Passed exception needs to be an instanceof Error")},setUserContext:function(e){t.set("context.user",e)},setExtraContext:function(e){t.set("context.extra",e)}}}]}function o(e,t){p(e),s(e,t),c(e,t),u(e,t),l(e,t)}function i(){}function a(e,t,n,a){function s(r){function o(r,o){if(!n.get("performance.enable"))return void t.debug("Performance monitoring is disable");t.debug("Route change started");var i;i=o.$$route?o.$$route.originalPath:o.name,(""===i||"undefined"==typeof i)&&(i="/"),e.startTransaction(i,"transaction")}n.set("isInstalled",!0),n.set("opbeatAgentName","opbeat-angular"),t.debug("Agent:",n.getAgentName()),r.$on("$routeChangeStart",o),r.$on("$stateChangeStart",o)}function c(t){o(t,e)}return window.angular&&"function"==typeof window.angular.module?(n.isPlatformSupported()?window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(t,n,a)).config(["$provide",c]).run(["$rootScope",s]):window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(t,n,a)).config(["$provide",i]).run(["$rootScope",i]),window.angular.module("opbeat-angular",["ngOpbeat"]),!0):void 0}var s=e("./patches/controllerPatch"),c=e("./patches/compilePatch"),u=e("./patches/rootScopePatch"),l=e("./patches/directivesPatch"),p=e("./patches/exceptionHandlerPatch");t.exports=a},{"./patches/compilePatch":13,"./patches/controllerPatch":14,"./patches/directivesPatch":15,"./patches/exceptionHandlerPatch":16,"./patches/rootScopePatch":17}],11:[function(e,t,n){function r(){var e=new i,t=new o(e);a(t)}var o=e("../common/serviceContainer"),i=e("../common/serviceFactory"),a=e("./angularInitializer");r()},{"../common/serviceContainer":23,"../common/serviceFactory":24,"./angularInitializer":9}],12:[function(e,t,n){function r(e,t,n){function r(r,i){return t(i),n&&l.test(window.name)&&(window.name=window.name.substring(u.length)),e.runInOpbeatZone(o,window.angular,arguments)}if("undefined"!=typeof window.angular){var o=window.angular.bootstrap;Object.defineProperty(window.angular,"bootstrap",{get:function(){return"function"==typeof o?r:o},set:function(e){o=e}})}}function o(e,t){if("undefined"!=typeof window.angular){if(l.test(window.name)){var n=window.angular.resumeBootstrap;return Object.defineProperty(window.angular,"resumeBootstrap",{get:function(){return function(r){return t(r),e.runInOpbeatZone(n,window.angular,arguments)}},set:function(e){n=e}}),!1}return window.name=u+window.name,window.angular.resumeDeferredBootstrap=function(){var n=[];return t(n),e.runInOpbeatZone(window.angular.resumeBootstrap,window.angular,[n])},window.addEventListener("beforeunload",function(){l.test(window.name)&&(window.name=window.name.substring(u.length))}),!0}}function i(e,t){var n=!1,r=window.angular;Object.defineProperty(window,"angular",{get:function(){return r},set:function(o){r=o,n||"object"!=typeof r||(n=!0,s(e,t))},enumerable:!0,configurable:!0})}function a(){}function s(e,t){var n=o(e,t);r(e,t,n)}function c(e,t){"function"!=typeof t&&(t=a),window.angular?s(e,t):i(e,t)}var u="NG_DEFER_BOOTSTRAP!",l=new RegExp("^"+u+".*");t.exports=c},{}],13:[function(e,t,n){var r=e("../../common/patchUtils"),o=e("../../lib/utils");t.exports=function(e,t){e.decorator("$compile",["$delegate","$injector",function(e,n){function i(){var n=t.startTrace(c,s,{enableStackFrames:!1});try{var r=e.apply(this,arguments)}finally{o.isUndefined(n)||n.end()}return r}var a=["$compile","compile"],s="template.$compile",c=a.join(".");return r._copyProperties(e,i),i}])}},{"../../common/patchUtils":21,"../../lib/utils":34}],14:[function(e,t,n){function r(e){var t,n;return"string"==typeof e[0]?n=e[0]:"function"==typeof e[0]&&(n=e[0].name),"object"==typeof e[1]&&(t=e[1].$scope),{scope:t,name:n}}var o=e("../../lib/utils");t.exports=function(e,t){e.decorator("$controller",["$delegate","$injector",function(e,n){return function(){var n=Array.prototype.slice.call(arguments),i=r(n);if(i.name){var a,s="$controller."+i.name,c="app.$controller",u=t.startTrace(s,c,{enableStackFrames:!1});try{a=e.apply(this,arguments)}finally{o.isUndefined(u)||u.end()}}else a=e.apply(this,arguments);return a}}])}},{"../../lib/utils":34}],15:[function(e,t,n){function r(e){return null==e?null:(e.exp?e=e.exp:e.name&&(e=e.name),e.toString())}var o=e("../../lib/utils");t.exports=function(e,t){"use strict";e.decorator("ngRepeatDirective",["$delegate","$injector",function(e,n){var i=e[0],a=i.compile;return i.compile=function(){var e=a.apply(this,arguments);return function(){var n=arguments[0],i=n.$watchCollection;n.$watchCollection=function(e,n){var a=r(e);"function"==typeof n&&(arguments[1]=function(e){var r="";if(null!=a){var i=Array.isArray(e)?"["+e.length+"]":"";r=a+i}var s="ngRepeat "+r,c="template.ngRepeat",u=t.startTrace(s,c,{enableStackFrames:!1}),l=n.apply(this,arguments);return o.isUndefined(u)||u.end(),l}),i.apply(this,arguments)};var a=e.apply(this,arguments);return n.$watchCollection=i,a}},e}])}},{"../../lib/utils":34}],16:[function(e,t,n){t.exports=function(e){e.decorator("$exceptionHandler",["$delegate","$opbeat",function(e,t){return function(n,r){return t.captureException(n),e(n,r)}}])}},{}],17:[function(e,t,n){function r(e,t){var n="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,r=n.$digest;return n.$digest=function(){var e=t.startTrace("$scope.$digest","app.$digest",{enableStackFrames:!1}),n=r.apply(this,arguments);return e&&e.end(),n},e}t.exports=function(e,t){e.decorator("$rootScope",["$delegate","$injector",function(e,n){return r(e,t)}])}},{}],18:[function(e,t,n){t.exports={createValidFrames:function(e){var t=[];return Array.isArray(e)&&(t=e.filter(function(e){return"undefined"!=typeof e.filename&&"undefined"!=typeof e.lineno})),t}}},{}],19:[function(e,t,n){function r(e,t,n){this._logger=t,this._transport=e,this._config=n}function o(e){var t=i(e,c);return Object.keys(t).map(function(e){var n=t[e][0],r=n._start;n.transaction?r-=n.transaction._start:r=0;var o={},i=u.createValidFrames(n.frames);return i.length>0&&(o._frames=i),{transaction:n.transaction.name,signature:n.signature,kind:n.type,timestamp:n.transaction._startStamp.toISOString(),parents:n.ancestors(),extra:o,_group:e}}).sort(function(e,t){return e.start_time-t.start_time})}function i(e,t){var n={};return e.forEach(function(e){var r=t(e);r in n?n[r].push(e):n[r]=[e],e._traceGroup=r}),n}function a(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}function s(e){return[a(e._startStamp).getTime(),e.name,e.result,e.type].join("-")}function c(e){var t=e.ancestors().map(function(e){return e.signature}).join(",");return[a(e.transaction._startStamp).getTime(),e.transaction.name,t,e.signature,e.type].join("-")}var u=e("./backend_utils");t.exports=r,r.prototype.sendError=function(e){this._config.isValid()?(e.stacktrace.frames=u.createValidFrames(e.stacktrace.frames),this._transport.sendError(e)):this._logger.debug("Config is not valid")},r.prototype.groupSmallContinuouslySimilarTraces=function(e,t){var n=e.duration(),r=[],o=1;return e.traces.forEach(function(i,a){if(0===r.length)r.push(i);else{var s=r[r.length-1],c=s.type===i.type&&s.signature===i.signature&&i.duration()/n<t&&(i._start-s._end)/n<t,u=e.traces.length===a+1;c&&(o++,s._end=i._end,s.calcDiff()),o>1&&(!c||u)&&(s.signature=o+"x "+s.signature,o=1),c||r.push(i)}}),r},r.prototype.checkBrowserResponsiveness=function(e,t,n){var r=e.browserResponsivenessCounter;if("undefined"==typeof t||"undefined"==typeof r)return!0;var o=e._rootTrace.duration(),i=Math.floor(o/t),a=r+n>=i;return a},r.prototype.sendTransactions=function(e){var t=this;if(this._config.isValid()){e.forEach(function(e){if(e.traces.sort(function(e,t){return e._start-t._start}),t._config.get("performance.groupSimilarTraces")){var n=t._config.get("performance.similarTraceThreshold");e.traces=t.groupSmallContinuouslySimilarTraces(e,n)}});var n=e.filter(function(e){var n=t._config.get("performance.checkBrowserResponsiveness");if(n){var r=t._config.get("performance.browserResponsivenessInterval"),o=t._config.get("performance.browserResponsivenessBuffer"),i=e._rootTrace.duration(),a=t.checkBrowserResponsiveness(e,r,o);if(!a)return t._logger.debug("Transaction was discarded! browser was not responsive enough during the transaction."," duration:",i," browserResponsivenessCounter:",e.browserResponsivenessCounter,"interval:",r),!1}return!0});if(n.length>0){var r=this._formatTransactions(n);return this._transport.sendTransaction(r)}}else this._logger.debug("Config is not valid")},r.prototype._formatTransactions=function(e){var t=this.groupTransactions(e),n=[].concat.apply([],e.map(function(e){return e.traces})),r=o(n),i=this.getRawGroupedTracesTimings(n,r);return r.forEach(function(e){delete e._group,"string"==typeof e.signature&&(e.signature=e.signature.substring(0,511))}),{transactions:t,traces:{groups:r,raw:i}}},r.prototype.groupTransactions=function(e){var t=i(e,s);return Object.keys(t).map(function(e){var n=t[e][0],r=t[e].map(function(e){return e.duration()});return{transaction:n.name,result:n.result,kind:n.type,timestamp:a(n._startStamp).toISOString(),durations:r}})},r.prototype.getRawGroupedTracesTimings=function(e,t){var n=function(e,t){var n=0,r=c(t);return e.forEach(function(e,t){e._group===r&&(n=t)}),n},r=this,o=i(e,function(e){return e.transaction.name+"|"+e.transaction._start});return Object.keys(o).map(function(e){var i=o[e],a=i[0].transaction,s=[a.duration()];return i.forEach(function(e){var o=n(t,e),i=e._start-a._start;i>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.relativeTraceStartLargerThanTransactionDuration","color: #ff0000",i,a._start,a.duration(),{trace:e,transaction:a}):0>i?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.negativeRelativeTraceStart!","color: #ff0000",i,e._start,a._start,e):e.duration()>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.traceDurationLargerThanTranscationDuration","color: #ff0000",e.duration(),a.duration(),{trace:e,transaction:a}):s.push([o,i,e.duration()])}),s})}},{"./backend_utils":18}],20:[function(e,t,n){function r(e){o(e)}var o=e("./patches/xhrPatch");t.exports=r},{"./patches/xhrPatch":22}],21:[function(e,t,n){function r(e){return"__opbeat_symbol__"+e}function o(e,t,n){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var a,s=r(t);return o&&!(a=o[s])&&(a=o[s]=o[t],o[t]=i(t,n(a,s,t))),a}function i(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}t.exports={patchFunction:function(e,t){},_copyProperties:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},wrapAfter:function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}},wrapBefore:function(e,t){return function(){return t.apply(this,arguments),e.apply(this,arguments)}},wrap:function(e,t,n){return function(){t.apply(this,arguments);var r=e.apply(this,arguments);return n.apply(this,arguments),r}},argumentsToArray:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},opbeatSymbol:r,patchMethod:o}},{}],22:[function(e,t,n){var r=e("../patchUtils"),o=r.opbeatSymbol("url"),i=r.opbeatSymbol("method"),a=r.opbeatSymbol("isAsync");t.exports=function(){r.patchMethod(window.XMLHttpRequest.prototype,"open",function(e){return function(t,n){t[i]=n[0],t[o]=n[1],t[a]=n[2],e.apply(t,n)}})}},{"../patchUtils":21}],23:[function(e,t,n){function r(e){this.serviceFactory=e,this.services={},this.services.configService=this.serviceFactory.getConfigService(),this.services.logger=this.serviceFactory.getLogger(),this.services.zoneService=this.createZoneService()}var o=e("../transaction/transaction_service"),i=e("../lib/utils");"undefined"==typeof window.Zone&&e("zone.js"),r.prototype.initialize=function(){var e=this.services.configService,t=this.services.logger,n=this.services.zoneService,r=this.services.opbeatBackend=this.serviceFactory.getOpbeatBackend(),a=this.services.transactionService=new o(n,this.services.logger,e,r);if(a.scheduleTransactionSend(),i.isUndefined(window.opbeatApi)&&(window.opbeatApi={}),window.opbeatApi.subscribeToTransactions=a.subscribe.bind(a),!i.isUndefined(window.opbeatApi.onload)){var s=window.opbeatApi.onload;s.forEach(function(e){try{e()}catch(n){t.error(n)}})}this.services.exceptionHandler=this.serviceFactory.getExceptionHandler()},r.prototype.createZoneService=function(){var t=this.services.logger,n=e("../transaction/zone_service");return new n(window.Zone.current,t,this.services.configService)},t.exports=r},{"../lib/utils":34,"../transaction/transaction_service":38,"../transaction/zone_service":39,"zone.js":8}],24:[function(e,t,n){function r(){this.services={}}var o=e("../backend/opbeat_backend"),i=e("loglevel"),a=e("../lib/config"),s=e("../lib/utils"),c=e("../lib/transport"),u=e("../exceptions/exceptionHandler");r.prototype.getOpbeatBackend=function(){if(s.isUndefined(this.services.OpbeatBackend)){var e=this.getLogger(),t=this.getConfigService(),n=this.getTransport();this.services.OpbeatBackend=new o(n,e,t)}return this.services.OpbeatBackend},r.prototype.getTransport=function(){return s.isUndefined(this.services.Transport)&&(this.services.Transport=c),this.services.Transport},r.prototype.setLogLevel=function(e,t){t.get("debug")===!0&&"trace"!==t.config.logLevel?e.setLevel("debug",!1):e.setLevel(t.get("logLevel"),!1)},r.prototype.getLogger=function(){if(s.isUndefined(this.services.Logger)){var e=this.getConfigService(),t=this;t.setLogLevel(i,e),e.subscribeToChange(function(n){t.setLogLevel(i,e)}),this.services.Logger=i}return this.services.Logger},r.prototype.getConfigService=function(){return s.isUndefined(this.services.ConfigService)&&(a.init(),this.services.ConfigService=a),this.services.ConfigService},r.prototype.getExceptionHandler=function(){if(s.isUndefined(this.services.ExceptionHandler)){var e=this.getLogger(),t=this.getConfigService(),n=new u(this.getOpbeatBackend(),t,e);this.services.ExceptionHandler=n}return this.services.ExceptionHandler},t.exports=r},{"../backend/opbeat_backend":19,"../exceptions/exceptionHandler":27,"../lib/config":30,"../lib/transport":33,"../lib/utils":34,loglevel:3}],25:[function(e,t,n){function r(){this.subscriptions=[]}r.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){var n=t.subscriptions.indexOf(e);n>-1&&t.subscriptions.splice(n,1)}},r.prototype.applyAll=function(e,t){this.subscriptions.forEach(function(n){try{n.apply(e,t)}catch(r){console.log(r,r.stack)}},this)},t.exports=r},{}],26:[function(e,t,n){var r=e("es6-promise").Promise,o=e("../lib/utils"),i=e("../lib/fileFetcher");t.exports={_findSourceMappingURL:function(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)[\s]*$/.exec(e);return t&&t[1]?t[1]:null},getFileSourceMapUrl:function(e){var t,n=this;return e?(t=e.split("/").length>1?e.split("/").slice(0,-1).join("/")+"/":"/",new r(function(r,o){i.getFile(e).then(function(e){var i=n._findSourceMappingURL(e);i?(i=t+i,r(i)):o("no sourceMapUrl")},o)})):r.reject("no fileUrl")},getExceptionContexts:function(e,t){return e&&t?new r(function(n,r){i.getFile(e).then(function(e){t-=1;var i=e.split("\n"),a=5,s=5,c={preContext:[],contextLine:null,postContext:[]};if(i.length){var u;if(u=e.indexOf("<html")>-1?!1:this.isSourceMinified(e))return r();for(var l=Math.max(0,t-a-1),p=Math.min(i.length,t-1),f=l;p>=f;++f)o.isUndefined(i[f])||c.preContext.push(i[f]);c.contextLine=i[t];for(var h=Math.min(i.length,t+1),d=Math.min(i.length,t+s),g=h;d>=g;++g)o.isUndefined(i[g])||c.postContext.push(i[g])}var v=1e3;c.contextLine.length>v&&r("aborting generating contexts, as line is over 1000 chars"),c.preContext.forEach(function(e){e.length>v&&r("aborting generating contexts, as preContext line is over 1000 chars")}),c.postContext.forEach(function(e){e.length>v&&r("aborting generating contexts, as postContext line is over 1000 chars")}),n(c)}.bind(this),r)}.bind(this)):r.reject("no line or url")},isSourceMinified:function(e){var t,n=50,r=5,o=250,i=0,a=0,s=0,c=0,u=!1;if(!e)return!1;for(e=e.replace(/\/\*[\S\s]*?\*\/|\/\/(.+|\n)/g,"");s++<n&&(i=e.indexOf("\n",a),-1!==i);){if(/^\s+/.test(e.slice(a,i))&&c++,i-a>o){u=!0;break}a=i+1}return t=r>c/s*100||u}}},{"../lib/fileFetcher":31,"../lib/utils":34,"es6-promise":2}],27:[function(e,t,n){var r=e("es6-promise").Promise,o=e("./stacktrace"),i=e("./frames"),a=function(e,t,n){this._opbeatBackend=e,this._config=t,this._logger=n};a.prototype.install=function(){window.onerror=function(e,t,n,r,o){this._processError(o,e,t,n,r)}.bind(this)},a.prototype.uninstall=function(){window.onerror=null},a.prototype.processError=function(e){return this._processError(e)},a.prototype._processError=function(e,t,n,a,s){if("Script error."!==t||n){var c={message:e?e.message:t,type:e?e.name:null,fileurl:n||null,lineno:a||null,colno:s||null};c.type||c.message.indexOf(":")>-1&&(c.type=c.message.split(":")[0]);var u;u=e?o.fromError(e):new r(function(e,t){e([{fileName:n,lineNumber:a,columnNumber:s}])});var l=this;return u.then(function(e){return c.stack=e||[],i.stackInfoToOpbeatException(c).then(function(e){var t=i.processOpbeatException(e,l._config.get("context.user"),l._config.get("context.extra"));l._opbeatBackend.sendError(t)})})["catch"](function(e){l._logger.debug(e)})}},t.exports=a},{"./frames":28,"./stacktrace":29,"es6-promise":2}],28:[function(e,t,n){var r=e("es6-promise").Promise,o=e("../lib/logger"),i=e("../lib/config"),a=e("../lib/utils"),s=e("./context"),c=e("./stacktrace"),u=function(e){for(var t=r.resolve(),n=[],o=0;o<e.length;++o)n.push(t=t.then(e[o]));return r.all(n)};t.exports={getFramesForCurrent:function(){return c.get().then(function(e){var t=e.map(function(e){return this.buildOpbeatFrame.bind(this,e)}.bind(this)),n=u(t);return n.then(function(e){return e})}.bind(this))},buildOpbeatFrame:function(e){return new r(function(t,n){if(!e.fileName&&!e.lineNumber)return t({});if(!e.columnNumber&&!e.lineNumber)return t({});var r=this.cleanFilePath(e.fileName),o=this.filePathToFileName(r);this.isFileInline(r)&&(o="(inline script)");var i={filename:o,lineno:e.lineNumber,colno:e.columnNumber,"function":e.functionName||"<anonymous>",abs_path:e.fileName,in_app:this.isFileInApp(r)},a=s.getFileSourceMapUrl(r);a.then(function(e){i.sourcemap_url=e,t(i)},function(){var n=this.cleanFilePath(e.fileName),r=s.getExceptionContexts(n,e.lineNumber);r.then(function(e){i.pre_context=e.preContext,i.context_line=e.contextLine,i.post_context=e.postContext,t(i)})["catch"](function(){t(i)})}.bind(this))}.bind(this))},stackInfoToOpbeatException:function(e){return new r(function(t,n){if(e.stack&&e.stack.length){var r=e.stack.map(function(e){return this.buildOpbeatFrame.bind(this,e)}.bind(this)),o=u(r);o.then(function(n){e.frames=n,e.stack=null,t(e)})}else t(e)}.bind(this))},processOpbeatException:function(e,t,n){var r,i=e.type,s=String(e.message)||"Script error",c=this.cleanFilePath(e.fileurl),u=this.filePathToFileName(c),l=e.frames||[];l&&l.length?l.reverse():u&&l.push({filename:u,lineno:e.lineno});var p={frames:l};if(!u&&l.length){var f=l[l.length-1];u=f.filename?f.filename:"(inline script)"}r=this.isFileInline(c)?"(inline script)":u;var h={message:i+": "+s,culprit:r,exception:{type:i,value:s},http:{url:window.location.href},stacktrace:p,user:t,level:null,logger:null,machine:null};return h.extra=this.getBrowserSpecificMetadata(),n&&(h.extra=a.mergeObject(h.extra,n)),o.log("opbeat.exceptions.processOpbeatException",h),h},cleanFilePath:function(e){return e||(e=""),"<anonymous>"===e&&(e=""),e},filePathToFileName:function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return e.indexOf(t)>-1&&(e=e.replace(t+"/","")),e},isFileInline:function(e){return e?0===window.location.href.indexOf(e):!1},isFileInApp:function(e){var t=i.get("libraryPathPattern");return!RegExp(t).test(e)},getBrowserSpecificMetadata:function(){var e=a.getViewPortInfo(),t={environment:{utcOffset:(new Date).getTimezoneOffset()/-60,browserWidth:e.width,browserHeight:e.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}};return t}}},{"../lib/config":30,"../lib/logger":32,"../lib/utils":34,"./context":26,"./stacktrace":29,"es6-promise":2}],29:[function(e,t,n){function r(e){return e.stack||e["opera#sourceloc"]}function o(e){return e.map(function(e){return e.functionName&&(e.functionName=i(e.functionName)),e})}function i(e){var t=e.split("/");return e=t.length>1?["Object",t[t.length-1]].join("."):t[0],e=e.replace(/.<$/gi,".<anonymous>"),e=e.replace(/^Anonymous function$/,"<anonymous>"),t=e.split("."),e=t.length>1?t[t.length-1]:t[0]}var a=e("error-stack-parser"),s=e("stack-generator"),c=e("es6-promise").Promise,u=e("../lib/utils"),l={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")&&-1===(e.functionName||"").indexOf("opbeatFunctionWrapper")&&-1===(e.fileName||"").indexOf("opbeat-angular.js")&&-1===(e.fileName||"").indexOf("opbeat-angular.min.js")&&-1===(e.fileName||"").indexOf("opbeat.js")&&-1===(e.fileName||"").indexOf("opbeat.min.js")}};t.exports={get:function(e){try{throw new Error}catch(t){return r(t)?this.fromError(t,e):this.generateArtificially(e)}},generateArtificially:function(e){e=u.mergeObject(l,e);var t=s.backtrace(e);return"function"==typeof e.filter&&(t=t.filter(e.filter)),t=o(t),c.resolve(t)},fromError:function(e,t){return t=u.mergeObject(l,t),new c(function(n){var r=a.parse(e);"function"==typeof t.filter&&(r=r.filter(t.filter)),r=o(r),n(c.all(r.map(function(e){return new c(function(t){t(e)})})))})}}},{"../lib/utils":34,"error-stack-parser":1,"es6-promise":2,"stack-generator":6}],30:[function(e,t,n){function r(){this.config={},this.defaults={opbeatAgentName:"opbeat-js",VERSION:"v3.2.1",apiHost:"intake.opbeat.com",isInstalled:!1,debug:!1,logLevel:"warn",orgId:null,appId:null,angularAppName:null,performance:{browserResponsivenessInterval:500,browserResponsivenessBuffer:3,checkBrowserResponsiveness:!0,enable:!0,enableStackFrames:!1,groupSimilarTraces:!0,similarTraceThreshold:.05},libraryPathPattern:"(node_modules|bower_components|webpack)",context:{user:{},extra:null}},this._changeSubscription=new a}function o(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var r=e.attributes,o=0;o<r.length;o++){var a=r[o];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];s=i.arrayMap(s.split("-"),function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e}).join(""),t[s]=a.value||a.nodeValue}}return t}var i=e("./utils"),a=e("../common/subscription");r.prototype.init=function(){var e=s();this.setConfig(e)},r.prototype.get=function(e){return i.arrayReduce(e.split("."),function(e,t){return e[t]},this.config)},r.prototype.set=function(e,t){var n=e.split("."),r=n.length-1,o=this.config;i.arraySome(n,function(e,n){if("undefined"==typeof e)return!0;if(n===r)o[e]=t;else{var i=o[e]||{};o[e]=i,o=i}})},r.prototype.getAgentName=function(){var e=this.config.VERSION;return(!e||e.indexOf("%%VERSION")>=0)&&(e="dev"),this.get("opbeatAgentName")+"/"+e},r.prototype.setConfig=function(e){e=e||{},this.config=i.merge({},this.defaults,this.config,e),this._changeSubscription.applyAll(this,[this.config])},r.prototype.subscribeToChange=function(e){return this._changeSubscription.subscribe(e)},r.prototype.isValid=function(){var e=["appId","orgId"],t=i.arrayMap(e,i.functionBind(function(e){return null===this.config[e]||void 0===this.config[e]},this));return-1===i.arrayIndexOf(t,!0)};var s=function(){var e=i.getCurrentScript(),t=o(e);return t};r.prototype.VERSION="v3.2.1",r.prototype.isPlatformSupported=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&i.isCORSSupported()},t.exports=new r},{"../common/subscription":25,"./utils":34}],31:[function(e,t,n){var r=e("simple-lru-cache"),o=e("./transport"),i=new r({maxSize:1e3});t.exports={getFile:function(e){var t=i.get(e);if("undefined"!=typeof t)return t;var n=o.getFile(e);return i.set(e,n),n}}},{"./transport":33,"simple-lru-cache":4}],32:[function(e,t,n){var r=e("./config"),o=[];t.exports={getLogStack:function(){return o},error:function(e,t){return this.log("%c "+e,"color: red",t)},warning:function(e,t){return this.log("%c "+e,"background-color: ffff00",t)},log:function(e,t){for(var n=new Array(arguments.length),i=0,a=arguments.length;a>i;i++)n[i]=arguments[i];var s=r.get("debug")===!0||"true"===r.get("debug"),c=window.console;return o.push({msg:e,data:n.slice(1)}),s&&c?"function"==typeof Function.prototype.bind?window.console.log.apply(window.console,n):Function.prototype.apply.call(window.console.log,window.console,n):void 0}}},{"./config":30}],33:[function(e,t,n){function r(e,t){i.log("opbeat.transport.sendToOpbeat",t);var n="https://"+a.get("apiHost")+"/api/v1/organizations/"+a.get("orgId")+"/apps/"+a.get("appId")+"/client-side/"+e+"/",r={"X-Opbeat-Client":a.getAgentName()};return o(n,"POST","JSON",t,r)}function o(e,t,n,r,o){return new s(function(a,s){var c=new window.XMLHttpRequest;if(c.open(t,e,!0),c.timeout=1e4,"JSON"===n&&c.setRequestHeader("Content-Type","application/json"),o)for(var u in o)o.hasOwnProperty(u)&&c.setRequestHeader(u.toLowerCase(),o[u]);c.onreadystatechange=function(t){if(4===c.readyState){var n=c.status;if(0===n||n>399&&600>n){var r=new Error(e+" HTTP status: "+n);r.xhr=c,s(r),i.log("opbeat.transport.makeRequest.error",r)}else a(c.responseText),i.log("opbeat.transport.makeRequest.success")}},c.onerror=function(e){s(e),i.log("opbeat.transport.makeRequest.error",e)},"JSON"===n&&(r=JSON.stringify(r)),c.send(r)})}var i=e("./logger"),a=e("./config"),s=e("es6-promise").Promise;t.exports={sendError:function(e){return r("errors",e)},sendTransaction:function(e){return r("transactions",e)},getFile:function(e){return o(e,"GET","",{})}}},{"./config":30,"./logger":32,"es6-promise":2}],34:[function(e,t,n){function r(e){return null!==e&&"object"==typeof e}function o(e){return"function"==typeof e}var i=[].slice;t.exports={getViewPortInfo:function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0],n=window.innerWidth||e.clientWidth||t.clientWidth,r=window.innerHeight||e.clientHeight||t.clientHeight;return{width:n,
height:r}},mergeObject:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},extend:function(e){return this.baseExtend(e,i.call(arguments,1),!1)},merge:function(e){return this.baseExtend(e,i.call(arguments,1),!0)},baseExtend:function a(e,t,n){for(var i=0,s=t.length;s>i;++i){var c=t[i];if(r(c)||o(c))for(var u=Object.keys(c),l=0,p=u.length;p>l;l++){var f=u[l],h=c[f];n&&r(h)?(r(e[f])||(e[f]=Array.isArray(h)?[]:{}),a(e[f],[h],!1)):e[f]=h}}return e},isObject:r,isFunction:o,arrayReduce:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=Object(e),o=r.length>>>0,i=0;if(!n){for(;o>i&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;o>i;i++)i in r&&(n=t(n,r[i],i,r));return n},arraySome:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;var r=Object(e),o=r.length>>>0;n||(n=void 0);for(var i=0;o>i;i++)if(i in r&&t.call(n,r[i],i,r))return!0;return!1},arrayMap:function(e,t,n){var r,o,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(e),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=n),o=new Array(s),i=0;s>i;){var c,u;i in a&&(c=a[i],u=t.call(r,c,i,a),o[i]=u),i++}return o},arrayIndexOf:function(e,t,n){var r;if(null==e)throw new TypeError('"arrayVal" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);i>r;){if(r in o&&o[r]===t)return r;r++}return-1},functionBind:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=function(){},o=function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=e.prototype,o.prototype=new r,o},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},isUndefined:function(e){return"undefined"==typeof e},isCORSSupported:function(){var e=new window.XMLHttpRequest;return"withCredentials"in e},getCurrentScript:function(){return document.currentScript||function(){var e=document.getElementsByTagName("script");return e[e.length-1]}()},generateUuid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}}},{}],35:[function(e,t,n){function r(e,t,n,r){this.transaction=e,this.signature=t,this.type=n,this.ended=!1,this._parent=null,this._diff=null,this._end=null,this._start=window.performance.now(),this._isFinish=new o(function(e,t){this._markFinishedFunc=e}.bind(this)),(s.isUndefined(r)||null==r)&&(r={});var i=r.enableStackFrames;i?this.getTraceStackFrames(function(e){e&&(this.frames=e.reverse()),this._markFinishedFunc()}.bind(this)):this._markFinishedFunc()}var o=e("es6-promise").Promise,i=e("../exceptions/frames"),a=e("./traceCache"),s=e("../lib/utils");r.prototype.calcDiff=function(){this._end&&this._start&&(this._diff=this._end-this._start)},r.prototype.end=function(){this._end=window.performance.now(),this.calcDiff(),this.ended=!0,s.isUndefined(this.transaction)||"function"!=typeof this.transaction._onTraceEnd||this.transaction._onTraceEnd(this)},r.prototype.duration=function(){return this.ended&&this._start?(this._diff=this._end-this._start,parseFloat(this._diff)):null},r.prototype.startTime=function(){return this.ended&&this.transaction.ended?this._start:null},r.prototype.ancestors=function(){var e=this.parent();return e?[e.signature]:[]},r.prototype.parent=function(){return this._parent},r.prototype.setParent=function(e){this._parent=e},r.prototype.getFingerprint=function(){for(var e=[this.transaction.name,this.signature,this.type],t=this._parent;t;)e.push(t.signature),t=t._parent;return e.join("-")},r.prototype.getTraceStackFrames=function(e){var t=this.getFingerprint(),n=a.get(t);n?e(n):i.getFramesForCurrent().then(function(n){a.set(t,n),e(n)})["catch"](function(){e(null)})},t.exports=r},{"../exceptions/frames":28,"../lib/utils":34,"./traceCache":36,"es6-promise":2}],36:[function(e,t,n){var r=e("simple-lru-cache");t.exports=new r({maxSize:5e3})},{"simple-lru-cache":4}],37:[function(e,t,n){function r(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._start>e._start&&(t=e)}),t}function o(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._end<e._end&&(t=e)}),t}var i=e("./trace"),a=e("es6-promise").Promise,s=e("../lib/utils"),c=function(e,t,n){this.metadata={},this.name=e,this.type=t,this.ended=!1,this._markDoneAfterLastTrace=!1,this._isDone=!1,this._options=n,"undefined"==typeof n&&(this._options={}),this.traces=[],this._activeTraces={},this._scheduledTasks={},this.events={},a.call(this.donePromise=Object.create(a.prototype),function(e,t){this._resolve=e,this._reject=t}.bind(this.donePromise)),this._rootTrace=this.startTrace("transaction","transaction",{enableStackFrames:!1}),this._startStamp=new Date,this._start=this._rootTrace._start,this.duration=this._rootTrace.duration.bind(this._rootTrace),this.nextId=0,this.loadCounter=0};c.prototype.startTrace=function(e,t,n){var r="undefined"==typeof n?{}:n;r.enableStackFrames=this._options.enableStackFrames===!0&&r.enableStackFrames!==!1;var o=new i(this,e,t,r);return o.traceId=this.nextId,this.nextId++,this._rootTrace&&(o.setParent(this._rootTrace),this._activeTraces[o.traceId]=o),o},c.prototype.recordEvent=function(e){var t=this.events[e.name];s.isUndefined(t)?(t={name:e.name,start:e.start,end:e.end,time:e.end-e.start,count:0},this.events[t.name]=t):(t.time+=e.end-e.start,t.count++,t.end=e.end)},c.prototype.isFinished=function(){return 0===Object.keys(this._scheduledTasks).length&&0===Object.keys(this._activeTraces).length},c.prototype.detectFinish=function(){this.isFinished()&&this.end()},c.prototype.end=function(){return this.ended?void 0:(this.ended=!0,this._rootTrace.end(),this.isFinished()===!0&&this._finish(),this.donePromise)},c.prototype.addTask=function(e){this._scheduledTasks[e]=e},c.prototype.removeTask=function(e){delete this._scheduledTasks[e]},c.prototype.addEndedTraces=function(e){this.traces=this.traces.concat(e)},c.prototype._onTraceEnd=function(e){this.traces.push(e),e._scheduledTasks=Object.keys(this._scheduledTasks),delete this._activeTraces[e.traceId]},c.prototype._finish=function(){if(this._alreadFinished!==!0){this._alreadFinished=!0;for(var e in this.events){var t=this.events[e],n=new i(this,e,e,this._options);n.ended=!0,n._start=t.start,n._diff=t.time,n._end=t.end,n.setParent(this._rootTrace),this.traces.push(n)}this._adjustStartToEarliestTrace(),this._adjustEndToLatestTrace();var r=this,o=r.traces.map(function(e){return e._isFinish});a.all(o).then(function(){r.donePromise._resolve(r)})}},c.prototype._adjustEndToLatestTrace=function(){var e=o(this.traces);"undefined"!=typeof e&&(this._rootTrace._end=e._end,this._rootTrace.calcDiff())},c.prototype._adjustStartToEarliestTrace=function(){var e=r(this.traces);e&&(this._rootTrace._start=e._start,this._rootTrace.calcDiff(),this._start=this._rootTrace._start)},t.exports=c},{"../lib/utils":34,"./trace":35,"es6-promise":2}],38:[function(e,t,n){function r(e,t,n,r){function o(e){"XMLHttpRequest.send"===e.source&&e.trace&&!e.trace.ended&&e.trace.end()}function i(e){if("XMLHttpRequest.send"===e.source){var t=u.startTrace(e.XHR.method+" "+e.XHR.url,"ext.HttpRequest",{enableStackFrames:!1});e.trace=t}u.addTask(e.taskId)}function s(e){u.removeTask(e.taskId),u.detectFinish()}function c(e){u.removeTask(e.taskId),u.detectFinish()}this._config=n,"undefined"==typeof n&&t.debug("TransactionService: config is not provided"),this._queue=[],this._logger=t,this._opbeatBackend=r,this._zoneService=e,this.transactions=[],this.nextId=1,this.taskMap={},this._queue=[],this._subscription=new a;var u=this;e.spec.onBeforeInvokeTask=o,e.spec.onScheduleTask=i,e.spec.onInvokeTask=s,e.spec.onCancelTask=c}var o=e("./transaction"),i=e("../lib/utils"),a=e("../common/subscription");r.prototype.getTransaction=function(e){return this.transactions[e]},r.prototype.createTransaction=function(e,t,n){var r=new o(e,t,n);return this._zoneService.set("transaction",r),this._config.get("performance.checkBrowserResponsiveness")&&this.startCounter(r),r},r.prototype.startCounter=function(e){e.browserResponsivenessCounter=0;var t=this._config.get("performance.browserResponsivenessInterval");return"undefined"==typeof t?void this._logger.debug("browserResponsivenessInterval is undefined!"):void this._zoneService.runOuter(function(){var n=setInterval(function(){e.ended?window.clearInterval(n):e.browserResponsivenessCounter++},t)})},r.prototype.getCurrentTransaction=function(){var e=this._zoneService.get("transaction");return i.isUndefined(e)||e.ended?void 0:e},r.prototype.startTransaction=function(e,t){var n=this,r=this._config.get("performance");if(r.enable){var o=this._zoneService.get("transaction");if(this.getCurrentTransaction()?(o.name=e,o.type=t,o._options=r):o=this.createTransaction(e,t,r),-1===this.transactions.indexOf(o)){this._logger.debug("TransactionService.startTransaction",o);var i=o.donePromise;i.then(function(e){n._logger.debug("TransactionService transaction finished",o),n.add(o),n._subscription.applyAll(n,[o]);var t=n.transactions.indexOf(o);-1!==t&&n.transactions.splice(t,1)}),this.transactions.push(o)}return o}},r.prototype.startTrace=function(e,t,n){var r=this._config.get("performance");if(r.enable){var o=this.getCurrentTransaction();o?this._logger.debug("TransactionService.startTrace",e,t):(o=this.createTransaction("ZoneTransaction","transaction",r),this._logger.debug("TransactionService.startTrace - ZoneTransaction",e,t));var i=o.startTrace(e,t,n);return i}},r.prototype.isLocked=function(){return!1},r.prototype.add=function(e){var t=this._config.get("performance");t.enable&&(this._queue.push(e),this._logger.debug("TransactionService.add",e))},r.prototype.getTransactions=function(){return this._queue},r.prototype.clearTransactions=function(){this._queue=[]},r.prototype.subscribe=function(e){return this._subscription.subscribe(e)},r.prototype.addTask=function(e){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.addTask(e),this._logger.debug("TransactionService.addTask",e))},r.prototype.removeTask=function(e){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.removeTask(e),this._logger.debug("TransactionService.removeTask",e))},r.prototype.detectFinish=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.detectFinish(),this._logger.debug("TransactionService.detectFinish"))},r.prototype.scheduleTransactionSend=function(){var e=this._logger,t=this._opbeatBackend,n=this;setInterval(function(){var r=n.getTransactions();0!==r.length&&(e.debug("Sending Transactions to opbeat.",r.length),t.sendTransactions(r),n.clearTransactions())},5e3)},t.exports=r},{"../common/subscription":25,"../lib/utils":34,"./transaction":37}],39:[function(e,t,n){function r(e,t,n){function r(){}this.events=new o;var i=0;this.events=new o;var p=this.spec={onScheduleTask:r,onBeforeInvokeTask:r,onInvokeTask:r,onCancelTask:r,onHandleError:r},f={name:"opbeatRootZone",onScheduleTask:function(e,n,r,o){if("eventTask"===o.type&&"opbeatImmediatelyFiringEvent"===o.data.eventName)return o.data.handler(o.data),o;var f=o.data&&o.data.target;if(f&&"undefined"==typeof o.data.target[l]&&(o.data.target[l]={registeredEventListeners:{}}),t.trace("zoneservice.onScheduleTask",o.source," type:",o.type),"macroTask"===o.type){t.trace("Zone: ",r.name);var h=i++,d={taskId:o.source+h,source:o.source,type:o.type};"setTimeout"===o.source?0===o.data.args[1]&&(o[a]=d,p.onScheduleTask(d)):"requestAnimationFrame"===o.source?(o[a]=d,p.onScheduleTask(d)):o.source===u&&(d.XHR={resolved:!1,send:!1,url:o.data.target[s],method:o.data.target[c]},o.data.target.addEventListener("opbeatImmediatelyFiringEvent",function(e){"undefined"!=typeof e.target[l]?o.data.target[l]=e.target[l]:o.data.target[l]=e.target[l]={registeredEventListeners:{}}}),o.data.target[l].task=d,o.data.target[l].typeName="XMLHttpRequest",p.onScheduleTask(d))}else"eventTask"!==o.type||!f||"readystatechange"!==o.data.eventName&&"load"!==o.data.eventName||(o.data.target[l].registeredEventListeners[o.data.eventName]={resolved:!1});var g=e.scheduleTask(r,o);return g},onInvokeTask:function(e,n,r,o,i,s){t.trace("zoneservice.onInvokeTask",o.source," type:",o.type);var c,f=o.data&&o.data.target;if(f&&"XMLHttpRequest"===o.data.target[l].typeName){var h=o.data.target[l];t.trace("opbeatData",h);var d=h.task;d&&"readystatechange"===o.data.eventName&&o.data.target.readyState===o.data.target.DONE?(h.registeredEventListeners.readystatechange.resolved=!0,p.onBeforeInvokeTask(d)):d&&"load"===o.data.eventName&&"load"in h.registeredEventListeners?h.registeredEventListeners.load.resolved=!0:d&&o.source===u&&(d.XHR.resolved=!0),c=e.invokeTask(r,o,i,s),!d||h.registeredEventListeners.load&&!h.registeredEventListeners.load.resolved||h.registeredEventListeners.readystatechange&&!h.registeredEventListeners.readystatechange.resolved||!d.XHR.resolved||p.onInvokeTask(d)}else!o[a]||"requestAnimationFrame"!==o.source&&"setTimeout"!==o.source?c=e.invokeTask(r,o,i,s):(p.onBeforeInvokeTask(o[a]),c=e.invokeTask(r,o,i,s),p.onInvokeTask(o[a]));return c},onCancelTask:function(e,t,n,r){var o;return"macroTask"===r.type&&(r.source===u?(o=r.data.target[l].task,p.onCancelTask(o)):!r[a]||"requestAnimationFrame"!==r.source&&"setTimeout"!==r.source||(o=r[a],p.onCancelTask(o))),e.cancelTask(n,r)}};this.outer=e,this.zone=e.fork(f)}var o=e("../common/subscription"),i=e("../common/patchUtils"),a=i.opbeatSymbol("taskData"),s=i.opbeatSymbol("url"),c=i.opbeatSymbol("method"),u="XMLHttpRequest.send",l=i.opbeatSymbol("opbeatData");r.prototype.set=function(e,t){window.Zone.current._properties[e]=t},r.prototype.get=function(e){return window.Zone.current.get(e)},r.prototype.getCurrentZone=function(){return window.zone},r.prototype.runOuter=function(e){return this.outer.run(e)},r.prototype.runInOpbeatZone=function(e,t,n){return this.zone.name===window.Zone.current.name?e.apply(t,n):this.zone.run(e,t,n)},t.exports=r},{"../common/patchUtils":21,"../common/subscription":25}]},{},[11]);