!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){function r(e){function t(){}function n(e){c.angularInitializer.beforeBootstrap(),u||(u=o(c))}function r(){c.angularInitializer.afterBootstrap()}var i=e.getPerformanceServiceContainer(),c=i.services;c.configService.isPlatformSupported()?i.initialize():c.logger.warn("Platform is not supported.");var u=!1;s(i),c.angularInitializer={afterBootstrap:t,beforeBootstrap:t},c.exceptionHandler=e.getExceptionHandler(),c.exceptionHandler.install(),u=o(c),a(c.zoneService,n,r)}function o(e){return i(e)}var i=e("./ngOpbeat"),a=e("./patches/bootstrapPatch"),s=e("opbeat-js-core").patchCommon;t.exports=r},{"./ngOpbeat":2,"./patches/bootstrapPatch":4,"opbeat-js-core":28}],2:[function(e,t,n){function r(e,t,n){this.config=function(e){e&&t.setConfig(e)},this.version=t.get("VERSION"),this.install=function(){e.warn("$opbeatProvider.install is deprecated!")},this.$get=[function(){return{getConfig:function(){return t},captureException:function(t,r){return t instanceof Error?void n.processError(t,r):void e.warn("Can't capture exception. Passed exception needs to be an instanceof Error")},setUserContext:function(e){t.set("context.user",e)},setExtraContext:function(e){t.set("context.extra",e)}}}]}function o(e,t){f(e),s(e,t),c(e,t),u(e,t),p(e,t),l(e,t)}function i(){}function a(e){function t(e){function t(e,t){if(l=!0,!u.get("performance.enable"))return void c.debug("Performance monitoring is disable");c.debug("Route change started");var n;if(t.$$route){if("undefined"!=typeof t.$$route.redirectTo)return;n=t.$$route.originalPath}else n=t.name;""!==n&&"undefined"!=typeof n||(n="/"),s.startTransaction(n,"route-change")}u.set("isInstalled",!0),u.set("opbeatAgentName","opbeat-angular"),u.set("platform.framework","angular/"+window.angular.version.full);var n=a();n&&u.set("platform.platform",n),c.debug("Agent:",u.getAgentName()),e.$on("$routeChangeStart",t),e.$on("$stateChangeStart",t)}function n(e){o(e,s)}function a(){var e="undefined"!=typeof window.cordova;return e?"cordova":"browser"}var s=e.transactionService,c=e.logger,u=e.configService,p=e.exceptionHandler,f=e.angularInitializer,l=!1;if(f.beforeBootstrap=function(){s.metrics.appBeforeBootstrap=performance.now()},f.afterBootstrap=function(){s.metrics.appAfterBootstrap=performance.now(),l||s.sendPageLoadMetrics(window.location.pathname)},window.angular&&"function"==typeof window.angular.module)return u.isPlatformSupported()?window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(c,u,p)).config(["$provide",n]).run(["$rootScope",t]):window.angular.module("ngOpbeat",[]).provider("$opbeat",new r(c,u,p)).config(["$provide",i]).run(["$rootScope",i]),window.angular.module("opbeat-angular",["ngOpbeat"]),!0}var s=e("./patches/controllerPatch"),c=e("./patches/compilePatch"),u=e("./patches/rootScopePatch"),p=e("./patches/directivesPatch"),f=e("./patches/exceptionHandlerPatch"),l=e("./patches/interactionsPatch");t.exports=a},{"./patches/compilePatch":5,"./patches/controllerPatch":6,"./patches/directivesPatch":7,"./patches/exceptionHandlerPatch":8,"./patches/interactionsPatch":9,"./patches/rootScopePatch":10}],3:[function(e,t,n){function r(){var e=new i;window.opbeatApi&&window.opbeatApi.serviceFactory&&(e=window.opbeatApi.serviceFactory),a(e)}var o=e("opbeat-js-core"),i=o.ServiceFactory,a=e("./angularInitializer");e("zone.js"),r()},{"./angularInitializer":1,"opbeat-js-core":28,"zone.js":41}],4:[function(e,t,n){function r(e,t){function n(n,o){return t&&u.test(window.name)&&(window.name=window.name.substring(c.length)),e(r,window.angular,arguments)}if("undefined"!=typeof window.angular){var r=window.angular.bootstrap;Object.defineProperty(window.angular,"bootstrap",{get:function(){return"function"==typeof r?n:r},set:function(e){r=e}})}}function o(e){if("undefined"!=typeof window.angular){if(u.test(window.name)){var t=window.angular.resumeBootstrap;return Object.defineProperty(window.angular,"resumeBootstrap",{get:function(){return"function"==typeof t?function(n){return e(t,window.angular,arguments)}:t},set:function(e){t=e}}),!1}return window.name=c+window.name,window.angular.resumeDeferredBootstrap=function(){var t=[];return e(window.angular.resumeBootstrap,window.angular,[t])},window.addEventListener("beforeunload",function(){u.test(window.name)&&(window.name=window.name.substring(c.length))}),!0}}function i(e){var t=!1,n=window.angular;Object.defineProperty(window,"angular",{get:function(){return n},set:function(r){n=r,t||"object"!=typeof n||(t=!0,a(e))},enumerable:!0,configurable:!0})}function a(e){var t=o(e);r(e,t)}function s(e,t,n){function r(r,o,i){"function"==typeof t&&t();var a=e.runInOpbeatZone(r,o,i,"angular:bootstrap");return"function"==typeof n&&n(),a}window.angular?a(r):i(r)}var c="NG_DEFER_BOOTSTRAP!",u=new RegExp("^"+c+".*");t.exports=s},{}],5:[function(e,t,n){var r=e("opbeat-js-core"),o=r.patchUtils,i=r.utils;t.exports=function(e,t){e.decorator("$compile",["$delegate","$injector",function(e,n){function r(){var n=t.startTrace(c,s,{enableStackFrames:!1});try{var r=e.apply(this,arguments)}finally{i.isUndefined(n)||n.end()}return r}var a=["$compile","compile"],s="template.$compile",c=a.join(".");return o._copyProperties(e,r),r}])}},{"opbeat-js-core":28}],6:[function(e,t,n){function r(e){var t,n;return"string"==typeof e[0]?n=e[0]:"function"==typeof e[0]&&(n=e[0].name),"object"==typeof e[1]&&(t=e[1].$scope),{scope:t,name:n}}var o=e("opbeat-js-core").utils;t.exports=function(e,t){e.decorator("$controller",["$delegate","$injector",function(e,n){return function(){var n=Array.prototype.slice.call(arguments),i=r(n);if(i.name){var a,s="$controller."+i.name,c="app.$controller",u=t.startTrace(s,c,{enableStackFrames:!1});try{a=e.apply(this,arguments)}finally{o.isUndefined(u)||u.end()}}else a=e.apply(this,arguments);return a}}])}},{"opbeat-js-core":28}],7:[function(e,t,n){function r(e){return null==e?null:(e.exp?e=e.exp:e.name&&(e=e.name),e.toString())}var o=e("opbeat-js-core").utils;t.exports=function(e,t){"use strict";e.decorator("ngRepeatDirective",["$delegate","$injector",function(e,n){var i=e[0],a=i.compile;return i.compile=function(){var e=a.apply(this,arguments);return function(){var n=arguments[0],i=n.$watchCollection;n.$watchCollection=function(e,n){var a=r(e);"function"==typeof n&&(arguments[1]=function(e){var r="";if(null!=a){var i=Array.isArray(e)?"["+e.length+"]":"";r=a+i}var s="ngRepeat "+r,c="template.ngRepeat",u=t.startTrace(s,c,{enableStackFrames:!1}),p=n.apply(this,arguments);return o.isUndefined(u)||u.end(),p}),i.apply(this,arguments)};var a=e.apply(this,arguments);return n.$watchCollection=i,a}},e}])}},{"opbeat-js-core":28}],8:[function(e,t,n){t.exports=function(e){e.decorator("$exceptionHandler",["$delegate","$opbeat",function(e,t){return function(n,r){return t.captureException(n),e(n,r)}}])}},{}],9:[function(e,t,n){t.exports=function(e,t){"use strict";function n(e,n){var r=e.compile;e.compile=function(){var e=r.apply(this,arguments);return function(r,o,i){var a=i.$normalize("ng-"+n),s=i[a];return o.on(n,function(e){t.startTransaction(a+": "+s,"interaction")}),e.apply(this,arguments)}}}e.decorator("ngSubmitDirective",["$delegate","$injector",function(e,t){var r=e[0];return n(r,"submit"),e}]),e.decorator("ngClickDirective",["$delegate","$injector",function(e,t){var r=e[0];return n(r,"click"),e}])}},{}],10:[function(e,t,n){function r(e,t){var n="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,r=n.$digest;return n.$digest=function(){var e=t.startTrace("$scope.$digest","app.$digest",{enableStackFrames:!1}),n=r.apply(this,arguments);return e&&e.end(),n},e}t.exports=function(e,t){e.decorator("$rootScope",["$delegate","$injector",function(e,n){return r(e,t)}])}},{}],11:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("error-stack-parser",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(e){"use strict";function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t.call(n,e[o]);return r}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],o=0;o<e.length;o++)t.call(n,e[o])&&r.push(e[o]);return r}function r(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var o=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(e.indexOf(":")===-1)return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(o){var a=n(o.stack.split("\n"),function(e){return!!e.match(i)},this);return t(a,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=r(["eval","<anonymous>"],o[0])>-1?void 0:o[0];return new e(i,(void 0),a,o[1],o[2],t)},this)},parseFFOrSafari:function(r){var o=n(r.stack.split("\n"),function(e){return!e.match(a)},this);return t(o,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),t.indexOf("@")===-1&&t.indexOf(":")===-1)return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),o=n.join("@")||void 0;return new e(o,(void 0),r[0],r[1],r[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e((void 0),(void 0),s[2],s[1],(void 0),r[i]))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e(s[3]||void 0,(void 0),s[2],s[1],(void 0),r[i]))}return o},parseOpera11:function(r){var i=n(r.stack.split("\n"),function(e){return!!e.match(o)&&!e.match(/^Error created at/)},this);return t(i,function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(a,s,o[0],o[1],o[2],t)},this)}}})}).call(this,void 0)},{stackframe:16}],12:[function(e,t,n){(function(e){!function(n,r){"use strict";"function"==typeof e&&e.amd?e(r):"object"==typeof t&&t.exports?t.exports=r():n.log=r()}(this,function(){"use strict";function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<c.length;n++){var r=c[n];this[r]=n<e?a:this.methodFactory(r,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function i(e,t,n){function i(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(n){}}function a(){var e;try{e=window.localStorage[f]}catch(t){}if(typeof e===s)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(f)+"=");r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===p.levels[e]&&(e=void 0),e}var u,p=this,f="loglevel";e&&(f+=":"+e),p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=n||o,p.getLevel=function(){return u},p.setLevel=function(t,n){if("string"==typeof t&&void 0!==p.levels[t.toUpperCase()]&&(t=p.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=p.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(u=t,n!==!1&&i(t),r.call(p,t,e),typeof console===s&&t<p.levels.SILENT)return"No console available for logging"},p.setDefaultLevel=function(e){a()||p.setLevel(e,!1)},p.enableAll=function(e){p.setLevel(p.levels.TRACE,e)},p.disableAll=function(e){p.setLevel(p.levels.SILENT,e)};var l=a();null==l&&(l=null==t?"WARN":t),p.setLevel(l,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],u=new i,p={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new i(e,u.getLevel(),u.methodFactory)),t};var f=typeof window!==s?window.log:void 0;return u.noConflict=function(){return typeof window!==s&&window.log===u&&(window.log=f),u},u})}).call(this,void 0)},{}],13:[function(e,t,n){t.exports=e("./lib/simple_lru.js")},{"./lib/simple_lru.js":14}],14:[function(e,t,n){"use strict";function r(e,t,n,r){this.before=e,this.next=t,this.key=n,this.value=r}function o(e){e||(e={}),this.maxSize=e.maxSize,this.reset()}r.prototype.setKey=function(e){this.key=e},r.prototype.setValue=function(e){this.value=e},o.prototype.reset=function(){this.size=0,this.cache={},this.tail=void 0,this.head=void 0},o.prototype.get=function(e,t){var n=this.cache[e];if(t=void 0==t||null==t||t,n&&t)return this.hit(n),n.value},o.prototype.set=function(e,t,n){var o=this.cache[e];if(n=void 0==n||null==n||n,o)o.value=t,n&&this.hit(o);else{var i;if(this.size>=this.maxSize){var a=this.tail.key;this.detach(this.tail),i=this.cache[a],delete this.cache[a],i.next=void 0,i.before=void 0,i.setKey(e),i.setValue(t)}i=i?i:new r((void 0),(void 0),e,t),this.cache[e]=i,this.attach(i)}},o.prototype.del=function(e){var t=this.cache[e];t&&(this.detach(t),delete this.cache[e])},o.prototype.hit=function(e){this.detach(e),this.attach(e)},o.prototype.attach=function(e){e&&(e.before=void 0,e.next=this.head,this.head=e,e.next?e.next.before=e:this.tail=e,this.size++)},o.prototype.detach=function(e){if(e){var t=e.before,n=e.next;t?t.next=n:this.head=n,n?n.before=t:this.tail=t,this.size--}},o.prototype.forEach=function(e){var t=this;Object.keys(this.cache).forEach(function(n){var r=t.cache[n];e(r.value,n)})},t.exports=o},{}],15:[function(e,t,n){(function(r){!function(o,i){"use strict";"function"==typeof r&&r.amd?r("stack-generator",["stackframe"],i):"object"==typeof n?t.exports=i(e("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var o=arguments.callee;o&&n.length<r;){for(var i=new Array(o.arguments.length),a=0;a<i.length;++a)i[a]=o.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?n.push(new e(RegExp.$1||void 0,i)):n.push(new e((void 0),i));try{o=o.caller}catch(s){break}}return n}}})}).call(this,void 0)},{stackframe:16}],16:[function(e,t,n){(function(e){!function(r,o){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],o):"object"==typeof n?t.exports=o():r.StackFrame=o()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,o,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",o=e(this.getLineNumber())?":"+this.getLineNumber():"",i=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+r+o+i}},t})}).call(this,void 0)},{}],17:[function(e,t,n){t.exports={createValidFrames:function(e){var t=[];return Array.isArray(e)&&(t=e.filter(function(e){return"undefined"!=typeof e.filename&&"undefined"!=typeof e.lineno})),t}}},{}],18:[function(e,t,n){function r(e,t,n){this._logger=t,this._transport=e,this._config=n}function o(e){var t=i(e,c);return Object.keys(t).map(function(e){var n=t[e][0],r=n._start;n.transaction?r-=n.transaction._start:r=0;var o={},i=u.createValidFrames(n.frames);return i.length>0&&(o._frames=i),{transaction:n.transaction.name,transaction_kind:n.transaction.type,signature:n.signature,kind:n.type,timestamp:n.transaction._startStamp.toISOString(),parents:n.ancestors(),extra:o,_group:e}}).sort(function(e,t){return e.start_time-t.start_time})}function i(e,t){var n={};return e.forEach(function(e){var r=t(e);r in n?n[r].push(e):n[r]=[e],e._traceGroup=r}),n}function a(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())}function s(e){return[a(e._startStamp).getTime(),e.name,e.result,e.type].join("-")}function c(e){var t=e.ancestors().map(function(e){return e.signature}).join(",");return[a(e.transaction._startStamp).getTime(),e.transaction.name,t,e.signature,e.type].join("-")}var u=e("./backend_utils"),p=e("../lib/utils");t.exports=r,r.prototype.sendError=function(e){if(this._config.isValid()){e.stacktrace.frames=u.createValidFrames(e.stacktrace.frames);var t={};e.stacktrace.frames.forEach(function(e){e.debug&&e.debug.length>0&&(t[e.abs_path]=e.debug.join(" - "),delete e.debug)}),Object.keys(t).length>0&&(e.extra.debug||(e.extra.debug={}),e.extra.debug.file_errors=t);var n=this.getHeaders();this._transport.sendError(e,n)}else this._logger.debug("Config is not valid")},r.prototype.getHeaders=function(){var e=this._config.get("platform"),t={"X-Opbeat-Client":this._config.getAgentName()};if(e){var n=[];e.platform&&n.push("platform="+e.platform),e.framework&&n.push("framework="+e.framework),n.length>0&&(t["X-Opbeat-Platform"]=n.join(" "))}return t},r.prototype.groupSmallContinuouslySimilarTraces=function(e,t){var n=e.duration(),r=[],o=1;return e.traces.forEach(function(i,a){if(0===r.length)r.push(i);else{var s=r[r.length-1],c=s.type===i.type&&s.signature===i.signature&&i.duration()/n<t&&(i._start-s._end)/n<t,u=e.traces.length===a+1;c&&(o++,s._end=i._end,s.calcDiff()),o>1&&(!c||u)&&(s.signature=o+"x "+s.signature,o=1),c||r.push(i)}}),r},r.prototype.checkBrowserResponsiveness=function(e,t,n){var r=e.browserResponsivenessCounter;if("undefined"==typeof t||"undefined"==typeof r)return!0;var o=e._rootTrace.duration(),i=Math.floor(o/t),a=r+n>=i;return a},r.prototype.setTransactionContextInfo=function(e){var t=this,n=t._config.get("performance.browserResponsivenessInterval"),r=t._config.get("performance.checkBrowserResponsiveness"),o=t._config.get("context");o&&(e.contextInfo=p.merge(e.contextInfo||{},o));var i=e.contextInfo,a=i.url;if(a&&a.location){a.location=a.location.substring(0,511);var s=p.parseUrl(a.location),c=s.protocol,u=["http:","https:","file:"];u.indexOf(c)<0?delete a.location:(a.base=s.path,Object.keys(s.queryStringParsed).length>0&&(a.query=s.queryStringParsed),s.hash&&(a.hash=s.hash))}i.system||(i.system={}),i.system.opbeat=t._config.getAgentName(),i.debug||(i.debug={}),r&&(i.debug.browserResponsivenessCounter=e.browserResponsivenessCounter,i.debug.browserResponsivenessInterval=n)},r.prototype.sendTransactions=function(e){var t=this;if(this._config.isValid()){var n=t._config.get("performance.browserResponsivenessInterval"),r=t._config.get("performance.checkBrowserResponsiveness");e.forEach(function(e){if(e.traces.sort(function(e,t){return e._start-t._start}),t._config.get("performance.groupSimilarTraces")){var n=t._config.get("performance.similarTraceThreshold");e.traces=t.groupSmallContinuouslySimilarTraces(e,n)}t.setTransactionContextInfo(e)});var o=e.filter(function(e){if(r&&!e.isHardNavigation){var o=t._config.get("performance.browserResponsivenessBuffer"),i=e._rootTrace.duration(),a=t.checkBrowserResponsiveness(e,n,o);if(!a)return t._logger.debug("Transaction was discarded! browser was not responsive enough during the transaction."," duration:",i," browserResponsivenessCounter:",e.browserResponsivenessCounter,"interval:",n),!1}return!0});if(o.length>0){var i=this._formatTransactions(o),a=this.getHeaders();return this._transport.sendTransaction(i,a)}}else this._logger.debug("Config is not valid")},r.prototype._formatTransactions=function(e){var t=this.groupTransactions(e),n=[].concat.apply([],e.map(function(e){return e.traces})),r=o(n),i=this.getRawGroupedTracesTimings(n,r);return r.forEach(function(e){delete e._group,"string"==typeof e.signature&&(e.signature=e.signature.substring(0,511))}),{transactions:t,traces:{groups:r,raw:i}}},r.prototype.groupTransactions=function(e){var t=i(e,s);return Object.keys(t).map(function(e){var n=t[e][0],r=t[e].map(function(e){return e.duration()});return{transaction:n.name,result:n.result,kind:n.type,timestamp:a(n._startStamp).toISOString(),durations:r}})},r.prototype.getRawGroupedTracesTimings=function(e,t){var n=function(e,t){var n=0,r=c(t);return e.forEach(function(e,t){e._group===r&&(n=t)}),n},r=this,o=i(e,function(e){return e.transaction.name+"|"+e.transaction._start});return Object.keys(o).map(function(e){var i=o[e],a=i[0].transaction,s=[a.duration()];return i.forEach(function(e){var o=n(t,e),i=e._start-a._start;i>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.relativeTraceStartLargerThanTransactionDuration","color: #ff0000",i,a._start,a.duration(),{trace:e,transaction:a}):i<0?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.negativeRelativeTraceStart!","color: #ff0000",i,e._start,a._start,e):e.duration()>a.duration()?r._logger.debug("%c -- opbeat.instrumentation.getRawGroupedTracesTimings.error.traceDurationLargerThanTranscationDuration","color: #ff0000",e.duration(),a.duration(),{trace:e,transaction:a}):s.push([o,i,e.duration()])}),a.contextInfo&&Object.keys(a.contextInfo).length>0&&s.push(a.contextInfo),s})}},{"../lib/utils":33,"./backend_utils":17}],19:[function(e,t,n){function r(e){o(e)}var o=e("./patches/xhrPatch");t.exports=r},{"./patches/xhrPatch":21}],20:[function(e,t,n){function r(e){return"__opbeat_symbol__"+e}function o(e,t,n){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var a,s=r(t);return o&&!(a=o[s])&&(a=o[s]=o[t],o[t]=i(t,n(a,s,t))),a}function i(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}t.exports={patchFunction:function(e,t){},_copyProperties:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},wrapAfter:function(e,t){return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}},wrapBefore:function(e,t){return function(){return t.apply(this,arguments),e.apply(this,arguments)}},wrap:function(e,t,n){return function(){t.apply(this,arguments);var r=e.apply(this,arguments);return n.apply(this,arguments),r}},argumentsToArray:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},opbeatSymbol:r,patchMethod:o}},{}],21:[function(e,t,n){var r=e("../patchUtils"),o=r.opbeatSymbol("url"),i=r.opbeatSymbol("method"),a=r.opbeatSymbol("isAsync");t.exports=function(){r.patchMethod(window.XMLHttpRequest.prototype,"open",function(e){return function(t,n){t[i]=n[0],t[o]=n[1],t[a]=n[2],e.apply(t,n)}})}},{"../patchUtils":20}],22:[function(e,t,n){function r(){this.services={}}var o=e("../backend/opbeat_backend"),i=e("loglevel"),a=e("../lib/config"),s=e("../lib/utils"),c=e("../lib/transport"),u=e("../exceptions/exceptionHandler"),p=e("../exceptions/stackFrameService"),f=e("../performance/serviceContainer");r.prototype.getOpbeatBackend=function(){if(s.isUndefined(this.services.OpbeatBackend)){var e=this.getLogger(),t=this.getConfigService(),n=this.getTransport();this.services.OpbeatBackend=new o(n,e,t)}return this.services.OpbeatBackend},r.prototype.getTransport=function(){return s.isUndefined(this.services.Transport)&&(this.services.Transport=c),this.services.Transport},r.prototype.setLogLevel=function(e,t){t.get("debug")===!0&&"trace"!==t.config.logLevel?e.setLevel("debug",!1):e.setLevel(t.get("logLevel"),!1)},r.prototype.getLogger=function(){if(s.isUndefined(this.services.Logger)){var e=this.getConfigService(),t=this;t.setLogLevel(i,e),e.subscribeToChange(function(n){t.setLogLevel(i,e)}),this.services.Logger=i}return this.services.Logger},r.prototype.getConfigService=function(){return s.isUndefined(this.services.ConfigService)&&(a.init(),this.services.ConfigService=a),this.services.ConfigService},r.prototype.getExceptionHandler=function(){if(s.isUndefined(this.services.ExceptionHandler)){var e=this.getLogger(),t=this.getConfigService(),n=new u(this.getOpbeatBackend(),t,e,this.getStackFrameService());this.services.ExceptionHandler=n}return this.services.ExceptionHandler},r.prototype.getStackFrameService=function(){if(s.isUndefined(this.services.StackFrameService)){var e=this.getLogger(),t=this.getConfigService(),n=new p(t,e);this.services.StackFrameService=n}return this.services.StackFrameService},r.prototype.getPerformanceServiceContainer=function(){return s.isUndefined(this.services.PerformanceServiceContainer)&&(this.services.PerformanceServiceContainer=new f(this)),this.services.PerformanceServiceContainer},t.exports=r},{"../backend/opbeat_backend":18,"../exceptions/exceptionHandler":25,"../exceptions/stackFrameService":26,"../lib/config":29,"../lib/transport":32,"../lib/utils":33,"../performance/serviceContainer":35,loglevel:12}],23:[function(e,t,n){function r(){this.subscriptions=[]}r.prototype.subscribe=function(e){var t=this;return this.subscriptions.push(e),function(){var n=t.subscriptions.indexOf(e);n>-1&&t.subscriptions.splice(n,1)}},r.prototype.applyAll=function(e,t){this.subscriptions.forEach(function(n){try{n.apply(e,t)}catch(r){console.log(r,r.stack)}},this)},t.exports=r},{}],24:[function(e,t,n){var r=e("../lib/utils"),o=e("../lib/fileFetcher");t.exports={_findSourceMappingURL:function(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)[\s]*$/.exec(e);return t&&t[1]?t[1]:null},getFileSourceMapUrl:function(e){var t,n=this;return e?(t=e.split("/").length>1?e.split("/").slice(0,-1).join("/")+"/":"/",new Promise(function(r,i){o.getFile(e).then(function(e){var o=n._findSourceMappingURL(e);o?(o=t+o,r(o)):i("no sourceMapUrl")},i)})):Promise.reject("no fileUrl")},getExceptionContexts:function(e,t){return e&&t?new Promise(function(n,i){o.getFile(e).then(function(e){t-=1;var o=e.split("\n"),a=5,s=5,c={preContext:[],contextLine:null,postContext:[]};if(o.length){var u;if(u=!(e.indexOf("<html")>-1)&&this.isSourceMinified(e))return i("abort generating contexts, source is minified");for(var p=Math.max(0,t-a-1),f=Math.min(o.length,t-1),l=p;l<=f;++l)r.isUndefined(o[l])||c.preContext.push(o[l]);c.contextLine=o[t];for(var d=Math.min(o.length,t+1),h=Math.min(o.length,t+s),g=d;g<=h;++g)r.isUndefined(o[g])||c.postContext.push(o[g])}var v=1e3;c.contextLine.length>v&&i("aborting generating contexts, as line is over 1000 chars"),c.preContext.forEach(function(e){e.length>v&&i("aborting generating contexts, as preContext line is over 1000 chars")}),c.postContext.forEach(function(e){e.length>v&&i("aborting generating contexts, as postContext line is over 1000 chars")}),n(c)}.bind(this),i)}.bind(this)):Promise.reject("no line or url")},isSourceMinified:function(e){var t,n=50,r=5,o=250,i=0,a=0,s=0,c=0,u=!1;if(!e)return!1;for(e=e.replace(/\/\*[\S\s]*?\*\/|\/\/(.+|\n)/g,"");s++<n&&(i=e.indexOf("\n",a),i!==-1);){if(/^\s+/.test(e.slice(a,i))&&c++,i-a>o){u=!0;break}a=i+1}return t=c/s*100<r||u}}},{"../lib/fileFetcher":30,"../lib/utils":33}],25:[function(e,t,n){function r(e){var t={};return Object.keys(e).forEach(function(n){if("stack"!==n){var r=e[n];if(null!==r){switch(typeof r){case"function":return;case"object":if("function"!=typeof r.toISOString)return;r=r.toISOString()}t[n]=r}}}),t}var o=e("./stacktrace"),i=e("../lib/utils"),a=function(e,t,n,r){this._opbeatBackend=e,this._config=t,this._logger=n,this._stackFrameService=r};a.prototype.install=function(){window.onerror=function(e,t,n,r,o){var i={eventObject:{msg:e,file:t,line:n,col:r}};this._processError(o,i)}.bind(this)},a.prototype.uninstall=function(){window.onerror=null},a.prototype.processError=function(e,t){return this._processError(e,t)},a.prototype._processError=function(e,t){var n=t&&t.eventObject||{},a=n.msg,s=n.file,c=n.line,u=n.col;if("Script error."!==a||s){var p=e?r(e):void 0;t&&t.extra&&(p=i.merge({},p,t.extra));var f={message:e?e.message:a,type:e?e.name:null,fileurl:s||null,lineno:c||null,colno:u||null,extra:p};f.type||f.message.indexOf(":")>-1&&(f.type=f.message.split(":")[0]);var l;l=e?o.fromError(e):new Promise(function(e,t){e([{fileName:s,lineNumber:c,columnNumber:u}])});var d=this;return l.then(function(e){return f.stack=e||[],d._stackFrameService.stackInfoToOpbeatException(f).then(function(e){var t=d._stackFrameService.processOpbeatException(e,d._config.get("context.user"),d._config.get("context.extra"));d._opbeatBackend.sendError(t)})})["catch"](function(e){d._logger.warn(e)})}},t.exports=a},{"../lib/utils":33,"./stacktrace":27}],26:[function(e,t,n){function r(e,t){this._logger=t,this._config=e}var o=e("../lib/utils"),i=e("./context"),a=e("./stacktrace"),s=function(e){for(var t=Promise.resolve(),n=[],r=0;r<e.length;++r)n.push(t=t.then(e[r]));return Promise.all(n)};r.prototype.getFramesForCurrent=function(){return a.get().then(function(e){var t=e.map(function(e){return this.buildOpbeatFrame.bind(this,e)}.bind(this)),n=s(t);return n.then(function(e){return e})}.bind(this))},r.prototype.buildOpbeatFrame=function(e){return new Promise(function(t,n){if(!e.fileName&&!e.lineNumber)return t({});if(!e.columnNumber&&!e.lineNumber)return t({});var r=this.cleanFilePath(e.fileName),o=this.filePathToFileName(r);this.isFileInline(r)&&(o="(inline script)");var a={filename:o,lineno:e.lineNumber,colno:e.columnNumber,"function":e.functionName||"<anonymous>",abs_path:e.fileName,in_app:this.isFileInApp(r),debug:[]},s=i.getFileSourceMapUrl(r);s.then(function(e){a.sourcemap_url=e,t(a)},function(n){var r=this.cleanFilePath(e.fileName),o=i.getExceptionContexts(r,e.lineNumber);a.debug.push(n),o.then(function(e){a.pre_context=e.preContext,a.context_line=e.contextLine,a.post_context=e.postContext,t(a)})["catch"](function(e){a.debug.push(e),t(a)})}.bind(this))}.bind(this))},r.prototype.stackInfoToOpbeatException=function(e){return new Promise(function(t,n){if(e.stack&&e.stack.length){var r=e.stack.map(function(e){return this.buildOpbeatFrame.bind(this,e);
}.bind(this)),o=s(r);o.then(function(n){e.frames=n,e.stack=null,t(e)})}else t(e)}.bind(this))},r.prototype.processOpbeatException=function(e,t,n){var r,i=e.type,a=String(e.message)||"Script error",s=this.cleanFilePath(e.fileurl),c=this.filePathToFileName(s),u=e.frames||[];u&&u.length?u.reverse():c&&u.push({filename:c,lineno:e.lineno});var p={frames:u};if(!c&&u.length){var f=u[u.length-1];c=f.filename?f.filename:"(inline script)"}r=this.isFileInline(s)?"(inline script)":c;var l={message:i+": "+a,culprit:r,exception:{type:i,value:a},http:{url:window.location.href},stacktrace:p,user:t||{},level:null,logger:null,machine:null},d=this.getBrowserSpecificMetadata();return l.extra=o.merge({},d,n,e.extra),this._logger.debug("opbeat.exceptions.processOpbeatException",l),l},r.prototype.cleanFilePath=function(e){return e||(e=""),"<anonymous>"===e&&(e=""),e},r.prototype.filePathToFileName=function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return e.indexOf(t)>-1&&(e=e.replace(t+"/","")),e},r.prototype.isFileInline=function(e){return!!e&&0===window.location.href.indexOf(e)},r.prototype.isFileInApp=function(e){var t=this._config.get("libraryPathPattern");return!RegExp(t).test(e)},r.prototype.getBrowserSpecificMetadata=function(){var e=o.getViewPortInfo(),t={environment:{utcOffset:(new Date).getTimezoneOffset()/-60,browserWidth:e.width,browserHeight:e.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}};return t},t.exports=r},{"../lib/utils":33,"./context":24,"./stacktrace":27}],27:[function(e,t,n){function r(e){return e.stack||e["opera#sourceloc"]}function o(e){return e.map(function(e){return e.functionName&&(e.functionName=i(e.functionName)),e})}function i(e){var t=e.split("/");return e=t.length>1?["Object",t[t.length-1]].join("."):t[0],e=e.replace(/.<$/gi,".<anonymous>"),e=e.replace(/^Anonymous function$/,"<anonymous>"),t=e.split("."),e=t.length>1?t[t.length-1]:t[0]}var a=e("error-stack-parser"),s=e("stack-generator"),c=e("../lib/utils"),u={filter:function(e){return(e.functionName||"").indexOf("StackTrace$$")===-1&&(e.functionName||"").indexOf("ErrorStackParser$$")===-1&&(e.functionName||"").indexOf("StackGenerator$$")===-1&&(e.functionName||"").indexOf("opbeatFunctionWrapper")===-1&&(e.fileName||"").indexOf("opbeat-angular.js")===-1&&(e.fileName||"").indexOf("opbeat-angular.min.js")===-1&&(e.fileName||"").indexOf("opbeat.js")===-1&&(e.fileName||"").indexOf("opbeat.min.js")===-1}};t.exports={get:function(e){try{throw new Error}catch(t){return r(t)?this.fromError(t,e):this.generateArtificially(e)}},generateArtificially:function(e){e=c.mergeObject(u,e);var t=s.backtrace(e);return"function"==typeof e.filter&&(t=t.filter(e.filter)),t=o(t),Promise.resolve(t)},fromError:function(e,t){return t=c.mergeObject(u,t),new Promise(function(n){var r=a.parse(e);"function"==typeof t.filter&&(r=r.filter(t.filter)),r=o(r),n(Promise.all(r.map(function(e){return new Promise(function(t){t(e)})})))})}}},{"../lib/utils":33,"error-stack-parser":11,"stack-generator":15}],28:[function(e,t,n){t.exports.ServiceFactory=e("./common/serviceFactory"),t.exports.ServiceContainer=e("./performance/serviceContainer"),t.exports.ConfigService=e("./lib/config"),t.exports.TransactionService=e("./performance/transactionService"),t.exports.Subscription=e("./common/subscription"),t.exports.patchUtils=e("./common/patchUtils"),t.exports.patchCommon=e("./common/patchCommon"),t.exports.utils=e("./lib/utils");var r=t.exports.test={};r.ZoneServiceMock=e("../test/performance/zoneServiceMock")},{"../test/performance/zoneServiceMock":40,"./common/patchCommon":19,"./common/patchUtils":20,"./common/serviceFactory":22,"./common/subscription":23,"./lib/config":29,"./lib/utils":33,"./performance/serviceContainer":35,"./performance/transactionService":38}],29:[function(e,t,n){function r(){this.config={},this.defaults={opbeatAgentName:"opbeat-js",VERSION:"v3.11.0",apiHost:"intake.opbeat.com",isInstalled:!1,debug:!1,logLevel:"warn",orgId:null,appId:null,angularAppName:null,performance:{browserResponsivenessInterval:500,browserResponsivenessBuffer:3,checkBrowserResponsiveness:!0,enable:!0,enableStackFrames:!1,groupSimilarTraces:!0,similarTraceThreshold:.05,captureInteractions:!1,sendVerboseDebugInfo:!1,includeXHRQueryString:!1,capturePageLoad:!1},libraryPathPattern:"(node_modules|bower_components|webpack)",context:{},platform:{}},this._changeSubscription=new a}function o(e){var t={},n=/^data\-([\w\-]+)$/;if(e)for(var r=e.attributes,o=0;o<r.length;o++){var a=r[o];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];s=i.arrayMap(s.split("-"),function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e}).join(""),t[s]=a.value||a.nodeValue}}return t}var i=e("./utils"),a=e("../common/subscription");r.prototype.init=function(){var e=s();this.setConfig(e)},r.prototype.get=function(e){return i.arrayReduce(e.split("."),function(e,t){return e&&e[t]},this.config)},r.prototype.set=function(e,t){var n=e.split("."),r=n.length-1,o=this.config;i.arraySome(n,function(e,n){if("undefined"==typeof e)return!0;if(n===r)o[e]=t;else{var i=o[e]||{};o[e]=i,o=i}})},r.prototype.getAgentName=function(){var e=this.config.VERSION;return(!e||e.indexOf("%%VERSION")>=0)&&(e="dev"),this.get("opbeatAgentName")+"/"+e},r.prototype.setConfig=function(e){e=e||{},this.config=i.merge({},this.defaults,this.config,e),this._changeSubscription.applyAll(this,[this.config])},r.prototype.subscribeToChange=function(e){return this._changeSubscription.subscribe(e)},r.prototype.isValid=function(){var e=["appId","orgId"],t=i.arrayMap(e,i.functionBind(function(e){return null===this.config[e]||void 0===this.config[e]},this));return i.arrayIndexOf(t,!0)===-1};var s=function(){var e=i.getCurrentScript(),t=o(e);return t};r.prototype.VERSION="v3.11.0",r.prototype.isPlatformSupported=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&i.isCORSSupported()},t.exports=new r},{"../common/subscription":23,"./utils":33}],30:[function(e,t,n){var r=e("simple-lru-cache"),o=e("./transport"),i=new r({maxSize:1e3});t.exports={getFile:function(e){var t=i.get(e);if("undefined"!=typeof t)return t;var n=o.getFile(e);return i.set(e,n),n}}},{"./transport":32,"simple-lru-cache":13}],31:[function(e,t,n){var r=e("./config"),o=[];t.exports={getLogStack:function(){return o},error:function(e,t){return this.log("%c "+e,"color: red",t)},warning:function(e,t){return this.log("%c "+e,"background-color: ffff00",t)},log:function(e,t){for(var n=new Array(arguments.length),i=0,a=arguments.length;i<a;i++)n[i]=arguments[i];var s=r.get("debug")===!0||"true"===r.get("debug"),c=window.console;if(o.push({msg:e,data:n.slice(1)}),s&&c)return"function"==typeof Function.prototype.bind?window.console.log.apply(window.console,n):Function.prototype.apply.call(window.console.log,window.console,n)}}},{"./config":29}],32:[function(e,t,n){function r(e,t,n){i.log("opbeat.transport.sendToOpbeat",t);var r="https://"+a.get("apiHost")+"/api/v1/organizations/"+a.get("orgId")+"/apps/"+a.get("appId")+"/client-side/"+e+"/";return o(r,"POST","JSON",t,n)}function o(e,t,n,r,o){return new Promise(function(a,s){var c=new window.XMLHttpRequest;if(c.open(t,e,!0),c.timeout=1e4,"JSON"===n&&c.setRequestHeader("Content-Type","application/json"),o)for(var u in o)o.hasOwnProperty(u)&&c.setRequestHeader(u.toLowerCase(),o[u]);c.onreadystatechange=function(t){if(4===c.readyState){var n=c.status;if(0===n||n>399&&n<600){var r=new Error(e+" HTTP status: "+n);r.xhr=c,s(r),i.log("opbeat.transport.makeRequest.error",r)}else a(c.responseText),i.log("opbeat.transport.makeRequest.success")}},c.onerror=function(e){s(e),i.log("opbeat.transport.makeRequest.error",e)},"JSON"===n&&(r=JSON.stringify(r)),c.send(r)})}var i=e("./logger"),a=e("./config");t.exports={sendError:function(e,t){return r("errors",e,t)},sendTransaction:function(e,t){return r("transactions",e,t)},getFile:function(e){return o(e,"GET","",{})}}},{"./config":29,"./logger":31}],33:[function(e,t,n){function r(e){return null!==e&&"object"==typeof e}function o(e){return"function"==typeof e}var i=[].slice;t.exports={getViewPortInfo:function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0],n=window.innerWidth||e.clientWidth||t.clientWidth,r=window.innerHeight||e.clientHeight||t.clientHeight;return{width:n,height:r}},mergeObject:function(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r},extend:function(e){return this.baseExtend(e,i.call(arguments,1),!1)},merge:function(e){return this.baseExtend(e,i.call(arguments,1),!0)},baseExtend:function a(e,t,n){for(var i=0,s=t.length;i<s;++i){var c=t[i];if(r(c)||o(c))for(var u=Object.keys(c),p=0,f=u.length;p<f;p++){var l=u[p],d=c[l];n&&r(d)?(r(e[l])||(e[l]=Array.isArray(d)?[]:{}),a(e[l],[d],!1)):e[l]=d}}return e},isObject:r,isFunction:o,arrayReduce:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var r=Object(e),o=r.length>>>0,i=0;if(!n){for(;i<o&&!(i in r);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[i++]}for(;i<o;i++)i in r&&(n=t(n,r[i],i,r));return n},arraySome:function(e,t,n){if(null==e)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;var r=Object(e),o=r.length>>>0;n||(n=void 0);for(var i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,r))return!0;return!1},arrayMap:function(e,t,n){var r,o,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(e),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=n),o=new Array(s),i=0;i<s;){var c,u;i in a&&(c=a[i],u=t.call(r,c,i,a),o[i]=u),i++}return o},arrayIndexOf:function(e,t,n){var r;if(null==e)throw new TypeError('"arrayVal" is null or not defined');var o=Object(e),i=o.length>>>0;if(0===i)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);r<i;){if(r in o&&o[r]===t)return r;r++}return-1},functionBind:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=function(){},o=function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=e.prototype,o.prototype=new r,o},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},isUndefined:function(e){return"undefined"==typeof e},isCORSSupported:function(){var e=new window.XMLHttpRequest;return"withCredentials"in e},getCurrentScript:function(){var e=document.currentScript;if(!e){var t=document.getElementsByTagName("script");e=t[t.length-1]}return e},generateUuid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},parseUrl:function(e){var t=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,n=t.exec(e),r=n[1]||"",o=n[3]||"",i=n[5]?"#"+n[5]:"",a="";e.indexOf("://")>-1&&(a=e.split("://")[0]+":");for(var s={},c=o.split("&"),u=0,p=c.length;u<p;u++){var f=c[u];if(""!==f&&"undefined"!=typeof f&&null!==f){var l=c[u].split("="),d=l.shift();s[d]=l.join("=")}}return{protocol:a,path:r,queryString:o,queryStringParsed:s,hash:i}}}},{}],34:[function(e,t,n){function r(e,t){var n=t.duration();return n<s&&n>0&&t._start<=e._rootTrace._end&&t._end<=e._rootTrace._end}var o=e("./trace"),i=[["domainLookupStart","domainLookupEnd","DNS lookup"],["connectStart","connectEnd","Connect"],["requestStart","responseStart","Sending and waiting for first byte"],["responseStart","responseEnd","Downloading"],["domLoading","domInteractive","Fetching, parsing and sync. execution"],["domContentLoadedEventStart","domContentLoadedEventEnd",'"DOMContentLoaded" event handling'],["loadEventStart","loadEventEnd",'"load" event handling']],a=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],s=3e5;t.exports=function(e){if(e.isHardNavigation&&window.performance&&window.performance.timing){var t=window.performance.timing.navigationStart,n=window.performance.timing;e._rootTrace._start=e._start=0,e.type="page-load";for(var s=0;s<i.length;s++){var c=n[i[s][0]],u=n[i[s][1]];if(c&&u&&u-c!==0){var p=new o(e,i[s][2],"hard-navigation.browser-timing");p._start=n[i[s][0]]-t,p.ended=!0,p.setParent(e._rootTrace),p.end(),p._end=n[i[s][1]]-t,p.calcDiff(),r(e,p)||e.traces.splice(e.traces.indexOf(p),1)}}if(window.performance.getEntriesByType){var f=window.performance.getEntriesByType("resource");for(s=0;s<f.length;s++){var l=f[s];if(!l.initiatorType||"xmlhttprequest"!==l.initiatorType){var d="resource";l.initiatorType&&(d+="."+l.initiatorType),p=new o(e,l.name,d),p._start=l.startTime,p.ended=!0,p.setParent(e._rootTrace),p.end(),p._end=l.responseEnd,p.calcDiff(),r(e,p)||e.traces.splice(e.traces.indexOf(p),1)}}}e._adjustStartToEarliestTrace(),e._adjustEndToLatestTrace();var h={timeToComplete:e._rootTrace._end};a.forEach(function(e){var r=n[e];r&&(h[e]=r-t)}),e.addMetrics(h)}return 0}},{"./trace":36}],35:[function(e,t,n){function r(e){this.serviceFactory=e,this.services={},this.services.configService=this.serviceFactory.getConfigService(),this.services.logger=this.serviceFactory.getLogger(),this.services.zoneService=this.createZoneService()}var o=e("./transactionService"),i=e("./zoneService"),a=e("../lib/utils");r.prototype.initialize=function(){var e=this.services.configService,t=this.services.logger,n=this.services.zoneService,r=this.services.opbeatBackend=this.serviceFactory.getOpbeatBackend(),i=this.services.transactionService=this.services.transactionService=new o(n,this.services.logger,e,r);if(i.scheduleTransactionSend(),a.isUndefined(window.opbeatApi)&&(window.opbeatApi={}),window.opbeatApi.subscribeToTransactions=i.subscribe.bind(i),!a.isUndefined(window.opbeatApi.onload)){var s=window.opbeatApi.onload;s.forEach(function(e){try{e()}catch(n){t.error(n)}})}},r.prototype.createZoneService=function(){var e=this.services.logger;return new i(window.Zone.current,e,this.services.configService)},t.exports=r},{"../lib/utils":33,"./transactionService":38,"./zoneService":39}],36:[function(e,t,n){function r(e,t,n,r){this.transaction=e,this.signature=t,this.type=n,this.ended=!1,this._parent=null,this._diff=null,this._end=null,this._start=window.performance.now(),this._isFinish=new Promise(function(e,t){this._markFinishedFunc=e}.bind(this)),(o.isUndefined(r)||null==r)&&(r={});var i=r.enableStackFrames;i?this.getTraceStackFrames(function(e){e&&(this.frames=e.reverse()),this._markFinishedFunc()}.bind(this)):this._markFinishedFunc()}var o=e("../lib/utils");r.prototype.calcDiff=function(){this._end&&this._start&&(this._diff=this._end-this._start)},r.prototype.end=function(){this._end=window.performance.now(),this.calcDiff(),this.ended=!0,o.isUndefined(this.transaction)||"function"!=typeof this.transaction._onTraceEnd||this.transaction._onTraceEnd(this)},r.prototype.duration=function(){return o.isUndefined(this.ended)||o.isUndefined(this._start)?null:(this._diff=this._end-this._start,parseFloat(this._diff))},r.prototype.startTime=function(){return this.ended&&this.transaction.ended?this._start:null},r.prototype.ancestors=function(){var e=this.parent();return e?[e.signature]:[]},r.prototype.parent=function(){return this._parent},r.prototype.setParent=function(e){this._parent=e},r.prototype.getFingerprint=function(){for(var e=[this.transaction.name,this.signature,this.type],t=this._parent;t;)e.push(t.signature),t=t._parent;return e.join("-")},r.prototype.getTraceStackFrames=function(e){e()},t.exports=r},{"../lib/utils":33}],37:[function(e,t,n){function r(e){var t=null;return e.forEach(function(e){t||(t=e),t&&t._start>e._start&&(t=e)}),t}var o=e("./trace"),i=e("../lib/utils"),a=function(e,t,n){this.metadata={},this.name=e,this.type=t,this.ended=!1,this._markDoneAfterLastTrace=!1,this._isDone=!1,this._options=n,"undefined"==typeof n&&(this._options={}),this.contextInfo={debug:{},_metrics:{},url:{location:window.location.href}},this._options.sendVerboseDebugInfo&&(this.contextInfo.debug.log=[],this.debugLog("Transaction",e,t)),this.traces=[],this._activeTraces={},this._scheduledTasks={},this.events={},Promise.call(this.donePromise=Object.create(Promise.prototype),function(e,t){this._resolve=e,this._reject=t}.bind(this.donePromise)),this._rootTrace=this.startTrace("transaction","transaction",{enableStackFrames:!1}),this._startStamp=new Date,this._start=this._rootTrace._start,this.duration=this._rootTrace.duration.bind(this._rootTrace),this.nextId=0,this.isHardNavigation=!1};a.prototype.debugLog=function(){if(this._options.sendVerboseDebugInfo){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.unshift(Date.now().toString()),this.contextInfo.debug.log.push(e.join(" - "))}},a.prototype.addMetrics=function(e){this.contextInfo._metrics=i.merge(this.contextInfo._metrics,e)},a.prototype.setDebugData=function(e,t){this.contextInfo.debug[e]=t},a.prototype.redefine=function(e,t,n){this.debugLog("redefine",e,t),this.name=e,this.type=t,this._options=n},a.prototype.startTrace=function(e,t,n){this.debugLog("startTrace",e,t);var r="undefined"==typeof n?{}:n;r.enableStackFrames=this._options.enableStackFrames===!0&&r.enableStackFrames!==!1;var i=new o(this,e,t,r);return i.traceId=this.nextId,this.nextId++,this._rootTrace&&(i.setParent(this._rootTrace),this._activeTraces[i.traceId]=i),i},a.prototype.recordEvent=function(e){var t=this.events[e.name];i.isUndefined(t)?(t={name:e.name,start:e.start,end:e.end,time:e.end-e.start,count:0},this.events[t.name]=t):(t.time+=e.end-e.start,t.count++,t.end=e.end)},a.prototype.isFinished=function(){var e=Object.keys(this._scheduledTasks);return this.debugLog("isFinished scheduledTasks.length",e.length),0===e.length},a.prototype.detectFinish=function(){this.isFinished()&&this.end()},a.prototype.end=function(){if(!this.ended)return this.debugLog("end"),this.ended=!0,this._rootTrace.end(),this.isFinished()===!0&&this._finish(),this.donePromise},a.prototype.addTask=function(e){this.debugLog("addTask",e),this._scheduledTasks[e]=e},a.prototype.removeTask=function(e){this.debugLog("removeTask",e),this.contextInfo.debug.lastRemovedTask=e,delete this._scheduledTasks[e]},a.prototype.addEndedTraces=function(e){this.traces=this.traces.concat(e)},a.prototype._onTraceEnd=function(e){this.traces.push(e),e._scheduledTasks=Object.keys(this._scheduledTasks),delete this._activeTraces[e.traceId]},a.prototype._finish=function(){if(this._alreadFinished!==!0){this._alreadFinished=!0;for(var e in this.events){var t=this.events[e],n=new o(this,e,e,this._options);n.ended=!0,n._start=t.start,n._diff=t.time,n._end=t.end,n.setParent(this._rootTrace),this.traces.push(n)}var r=this,i=Object.keys(r._activeTraces).map(function(e){return r._activeTraces[e]});i=i.concat(r.traces);var a=i.map(function(e){return e._isFinish});Promise.all(a).then(function(){r._adjustStartToEarliestTrace(),r._adjustEndToLatestTrace(),r.donePromise._resolve(r)})}},a.prototype._adjustEndToLatestTrace=function(){var e,t=this._rootTrace;this.traces.forEach(function(n){n!==t&&(e||(e=n),e&&e._end<n._end&&(e=n))}),"undefined"!=typeof e&&(this._rootTrace._end=e._end,this._rootTrace.calcDiff())},a.prototype._adjustStartToEarliestTrace=function(){var e=r(this.traces);e&&(this._rootTrace._start=e._start,this._rootTrace.calcDiff(),this._start=this._rootTrace._start)},t.exports=a},{"../lib/utils":33,"./trace":36}],38:[function(e,t,n){function r(e,t,n,r){function o(e){"XMLHttpRequest.send"===e.source&&e.trace&&!e.trace.ended&&e.trace.end(),l.logInTransaction("Executing",e.taskId)}function s(e){if("XMLHttpRequest.send"===e.source){var t=e.XHR.url,n=e.XHR.method+" ";if(l._config.get("performance.includeXHRQueryString"))n+=t;else{var r=i.parseUrl(t);n+=r.path}var o=l.startTrace(n,"ext.HttpRequest",{enableStackFrames:!1});e.trace=o}l.addTask(e.taskId)}function c(e){"XMLHttpRequest.send"===e.source&&e.trace&&!e.trace.ended&&(e.trace.end(),l.logInTransaction("xhr late ending"),l.setDebugDataOnTransaction("xhrLateEnding",!0)),l.removeTask(e.taskId),l.detectFinish()}function u(e){l.removeTask(e.taskId),l.detectFinish()}function p(e){t.trace("onInvokeEnd","source:",e.source,"type:",e.type),l.detectFinish()}function f(e){t.trace("onInvokeStart","source:",e.source,"type:",e.type)}this._config=n,"undefined"==typeof n&&t.debug("TransactionService: config is not provided"),this._queue=[],this._logger=t,this._opbeatBackend=r,this._zoneService=e,this.transactions=[],this.nextId=1,this.taskMap={},this.metrics={},this._queue=[],this._subscription=new a;var l=this;this._alreadyCapturedPageLoad=!1,e.spec.onBeforeInvokeTask=o,e.spec.onScheduleTask=s,e.spec.onInvokeTask=c,e.spec.onCancelTask=u,e.spec.onInvokeEnd=p,e.spec.onInvokeStart=f}var o=e("./transaction"),i=e("../lib/utils"),a=e("../common/subscription"),s=e("./captureHardNavigation");r.prototype.getTransaction=function(e){return this.transactions[e]},r.prototype.createTransaction=function(e,t,n){var r=n;if(i.isUndefined(r)&&(r=this._config.get("performance")),r.enable&&this._zoneService.isOpbeatZone()){var a=new o(e,t,r);return a.contextInfo.debug.zone=this._zoneService.getCurrentZone().name,this._zoneService.set("transaction",a),r.checkBrowserResponsiveness&&this.startCounter(a),a}},r.prototype.createZoneTransaction=function(){return this.createTransaction("ZoneTransaction","transaction")},r.prototype.getCurrentTransaction=function(){var e=this._config.get("performance");if(e.enable&&this._zoneService.isOpbeatZone()){var t=this._zoneService.get("transaction");return i.isUndefined(t)||t.ended?this.createZoneTransaction():t}},r.prototype.startCounter=function(e){e.browserResponsivenessCounter=0;var t=this._config.get("performance.browserResponsivenessInterval");return"undefined"==typeof t?void this._logger.debug("browserResponsivenessInterval is undefined!"):void this._zoneService.runOuter(function(){var n=setInterval(function(){e.ended?window.clearInterval(n):e.browserResponsivenessCounter++},t)})},r.prototype.sendPageLoadMetrics=function(e){var t=this,n=this._config.get("performance"),r=new o(e,"page-load",n);return r.donePromise.then(function(){var e=t.capturePageLoadMetrics(r);e&&(t.add(r),t._subscription.applyAll(t,[r]))}),r.detectFinish(),r},r.prototype.capturePageLoadMetrics=function(e){var t=this,n=t._config.get("performance.capturePageLoad");if(n&&!t._alreadyCapturedPageLoad)return e.addMetrics(t.metrics),e.isHardNavigation=!0,s(e),t._alreadyCapturedPageLoad=!0,!0},r.prototype.startTransaction=function(e,t){var n=this,r=this._config.get("performance");if("interaction"!==t||r.captureInteractions){var o=this.getCurrentTransaction();if(o){if("ZoneTransaction"!==o.name?(this.logInTransaction("Ending early to start a new transaction:",e,t),this._logger.debug("Ending old transaction",o),o.end(),o=this.createTransaction(e,t)):o.redefine(e,t,r),this.transactions.indexOf(o)===-1){this._logger.debug("TransactionService.startTransaction",o);var i=o.donePromise;i.then(function(e){n._logger.debug("TransactionService transaction finished",o),n.capturePageLoadMetrics(o),n.add(o),n._subscription.applyAll(n,[o]);var t=n.transactions.indexOf(o);t!==-1&&n.transactions.splice(t,1)}),this.transactions.push(o)}return o}}},r.prototype.startTrace=function(e,t,n){var r=this.getCurrentTransaction();if(r){this._logger.debug("TransactionService.startTrace",e,t);var o=r.startTrace(e,t,n);return o}},r.prototype.add=function(e){var t=this._config.get("performance");t.enable&&(this._queue.push(e),this._logger.debug("TransactionService.add",e))},r.prototype.getTransactions=function(){return this._queue},r.prototype.clearTransactions=function(){this._queue=[]},r.prototype.subscribe=function(e){return this._subscription.subscribe(e)},r.prototype.addTask=function(e){var t=this.getCurrentTransaction();t&&(t.addTask(e),this._logger.debug("TransactionService.addTask",e))},r.prototype.removeTask=function(e){var t=this._zoneService.get("transaction");i.isUndefined(t)||t.ended||(t.removeTask(e),this._logger.debug("TransactionService.removeTask",e))},r.prototype.logInTransaction=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||e.debugLog.apply(e,arguments)},r.prototype.setDebugDataOnTransaction=function(e,t){var n=this._zoneService.get("transaction");i.isUndefined(n)||n.ended||n.setDebugData(e,t)},r.prototype.detectFinish=function(){var e=this._zoneService.get("transaction");i.isUndefined(e)||e.ended||(e.detectFinish(),this._logger.debug("TransactionService.detectFinish"))},r.prototype.scheduleTransactionSend=function(){var e=this._logger,t=this._opbeatBackend,n=this;setInterval(function(){var r=n.getTransactions();0!==r.length&&(e.debug("Sending Transactions to opbeat.",r.length),t.sendTransactions(r),n.clearTransactions())},5e3)},t.exports=r},{"../common/subscription":23,"../lib/utils":33,"./captureHardNavigation":34,"./transaction":37}],39:[function(e,t,n){function r(e,t,n){function r(){}this.events=new o;var i=0;this.events=new o;var f=this.spec={onScheduleTask:r,onBeforeInvokeTask:r,onInvokeTask:r,onCancelTask:r,onHandleError:r,onInvokeStart:r,onInvokeEnd:r},l={name:"opbeatRootZone",onScheduleTask:function(e,n,r,o){if("eventTask"===o.type&&"opbeatImmediatelyFiringEvent"===o.data.eventName)return o.data.handler(o.data),o;var l=o.data&&o.data.target;if(l&&"undefined"==typeof o.data.target[p]&&(o.data.target[p]={registeredEventListeners:{}}),t.trace("zoneservice.onScheduleTask",o.source," type:",o.type),"macroTask"===o.type){t.trace("Zone: ",r.name);var d=i++,h={taskId:o.source+d,source:o.source,type:o.type};"setTimeout"===o.source?0!==o.data.args[1]&&"undefined"!=typeof o.data.args[1]||(o[a]=h,f.onScheduleTask(h)):o.source===u&&(h.XHR={resolved:!1,send:!1,url:o.data.target[s],method:o.data.target[c]},o.data.target.addEventListener("opbeatImmediatelyFiringEvent",function(e){"undefined"!=typeof e.target[p]?o.data.target[p]=e.target[p]:o.data.target[p]=e.target[p]={registeredEventListeners:{}}}),o.data.target[p].task=h,o.data.target[p].typeName="XMLHttpRequest",f.onScheduleTask(h))}else"eventTask"!==o.type||!l||"readystatechange"!==o.data.eventName&&"load"!==o.data.eventName||(o.data.target[p].registeredEventListeners[o.data.eventName]={resolved:!1});var g=e.scheduleTask(r,o);return g},onInvoke:function(e,t,n,r,o,i,a){f.onInvokeStart({source:a,type:"invoke"});var s=r.apply(o,i);return f.onInvokeEnd({source:a,type:"invoke"}),s},onInvokeTask:function(e,n,r,o,i,s){f.onInvokeStart({source:o.source,type:o.type}),t.trace("zoneservice.onInvokeTask",o.source," type:",o.type);var c,l=o.data&&o.data.target;if(l&&"XMLHttpRequest"===o.data.target[p].typeName){var d=o.data.target[p];t.trace("opbeatData",d);var h=d.task;h&&"readystatechange"===o.data.eventName&&o.data.target.readyState===o.data.target.DONE?(d.registeredEventListeners.readystatechange.resolved=!0,f.onBeforeInvokeTask(h)):h&&"load"===o.data.eventName&&"load"in d.registeredEventListeners?d.registeredEventListeners.load.resolved=!0:h&&o.source===u&&(h.XHR.resolved=!0),c=e.invokeTask(r,o,i,s),!h||d.registeredEventListeners.load&&!d.registeredEventListeners.load.resolved||d.registeredEventListeners.readystatechange&&!d.registeredEventListeners.readystatechange.resolved||!h.XHR.resolved||f.onInvokeTask(h)}else o[a]&&"setTimeout"===o.source?(f.onBeforeInvokeTask(o[a]),c=e.invokeTask(r,o,i,s),f.onInvokeTask(o[a])):c=e.invokeTask(r,o,i,s);return f.onInvokeEnd({source:o.source,type:o.type}),c},onCancelTask:function(e,t,n,r){var o;return"macroTask"===r.type&&(r.source===u?(o=r.data.target[p].task,f.onCancelTask(o)):r[a]&&"setTimeout"===r.source&&(o=r[a],f.onCancelTask(o))),e.cancelTask(n,r)}};this.outer=e,this.zone=e.fork(l)}var o=e("../common/subscription"),i=e("../common/patchUtils"),a=i.opbeatSymbol("taskData"),s=i.opbeatSymbol("url"),c=i.opbeatSymbol("method"),u="XMLHttpRequest.send",p=i.opbeatSymbol("opbeatData");r.prototype.set=function(e,t){window.Zone.current._properties[e]=t},r.prototype.get=function(e){return window.Zone.current.get(e)},r.prototype.getCurrentZone=function(){return window.Zone.current},r.prototype.isOpbeatZone=function(){return this.zone.name===window.Zone.current.name},r.prototype.runOuter=function(e){return this.outer.run(e)},r.prototype.runInOpbeatZone=function(e,t,n,r){return this.zone.run(e,t,n,r||"runInOpbeatZone:"+e.name)},t.exports=r},{"../common/patchUtils":20,"../common/subscription":23}],40:[function(e,t,n){function r(){function e(){}this.spec={onScheduleTask:e,onInvokeTask:e,onCancelTask:e},this.zone={name:"opbeatMockZone"},this.get=function(e){return this.zone[e]},this.set=function(e,t){this.zone[e]=t},this.runOuter=function(e){return e()},this.zone.run=function(e,t,n,r){return e.apply(t,n)},this.runInOpbeatZone=function(e,t,n){return e.apply(t,n)},this.isOpbeatZone=function(){return!0},this.getCurrentZone=function(){return this.zone}}t.exports=r},{}],41:[function(e,t,n){(function(e){!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){"use strict";function t(e){function t(e){var t=e[g];return t}function n(e){var t=e.data;t.target.addEventListener("readystatechange",function(){t.target.readyState===t.target.DONE&&(t.aborted||e.invoke())});var n=t.target[g];return n||(t.target[g]=e),i.apply(t.target,t.args),e}function r(){}function o(e){var t=e.data;return t.aborted=!0,a.apply(t.target,t.args)}var i=c.patchMethod(e.XMLHttpRequest.prototype,"send",function(){return function(e,t){var i=Zone.current,a={target:e,isPeriodic:!1,delay:null,args:t,aborted:!1};return i.scheduleMacroTask("XMLHttpRequest.send",r,a,n,o)}}),a=c.patchMethod(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,n){var r=t(e);if(r&&"string"==typeof r.type){if(null==r.cancelFn)return;r.zone.cancelTask(r)}}})}n(1);var r=n(2),o=n(4),i=n(5),a=n(6),s=n(8),c=n(3),u="set",p="clear",f=["alert","prompt","confirm"],l="undefined"==typeof window?e:window;s.patchTimer(l,u,p,"Timeout"),s.patchTimer(l,u,p,"Interval"),s.patchTimer(l,u,p,"Immediate"),s.patchTimer(l,"request","cancel","AnimationFrame"),s.patchTimer(l,"mozRequest","mozCancel","AnimationFrame"),s.patchTimer(l,"webkitRequest","webkitCancel","AnimationFrame");for(var d=0;d<f.length;d++){var h=f[d];c.patchMethod(l,h,function(e,t,n){return function(t,r){return Zone.current.run(e,l,r,n)}})}r.eventTargetPatch(l),a.propertyDescriptorPatch(l),c.patchClass("MutationObserver"),c.patchClass("WebKitMutationObserver"),c.patchClass("FileReader"),o.propertyPatch(),i.registerElementPatch(l),t(l);var g=c.zoneSymbol("xhrTask");l.navigator&&l.navigator.geolocation&&c.patchPrototype(l.navigator.geolocation,["getCurrentPosition","watchPosition"])}).call(t,function(){return this}())},function(e,t){(function(e){(function(e){function t(e){return"__zone_symbol__"+e}function n(){0==S&&0==k.length&&(e[m]?e[m].resolve(0)[y](i):e[v](i,0))}function r(e){n(),k.push(e)}function o(e){var t=e&&e.rejection;t&&console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0),console.error(e)}function i(){if(!T){for(T=!0;k.length;){var e=k;k=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(r){o(r)}}}for(;_.length;)for(var i=function(){var e=_.shift();try{e.zone.runGuarded(function(){
throw e})}catch(t){o(t)}};_.length;)i();T=!1}}function a(e){return e&&e.then}function s(e){return e}function c(e){return L.reject(e)}function u(e,t){return function(n){p(e,t,n)}}function p(e,t,r){if(e[x]===P)if(r instanceof L&&r[x]!==P)f(r),p(e,r[x],r[E]);else if(a(r))r.then(u(e,t),u(e,!1));else{e[x]=t;var o=e[E];e[E]=r;for(var i=0;i<o.length;)l(e,o[i++],o[i++],o[i++],o[i++]);if(0==o.length&&t==I){e[x]=F;try{throw new Error("Uncaught (in promise): "+r)}catch(s){var c=s;c.rejection=r,c.promise=e,c.zone=d.current,c.task=d.currentTask,_.push(c),n()}}}return e}function f(e){if(e[x]===F){e[x]=I;for(var t=0;t<_.length;t++)if(e===_[t].promise){_.splice(t,1);break}}}function l(e,t,n,r,o){f(e);var i=e[x]?r||s:o||c;t.scheduleMicroTask(O,function(){try{p(n,!0,t.run(i,null,[e[E]]))}catch(r){p(n,!1,r)}})}if(e.Zone)throw new Error("Zone already loaded.");var d=function(){function e(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new h(this,this._parent&&this._parent._zoneDelegate,t)}return Object.defineProperty(e,"current",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentTask",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},e.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},e.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},e.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},e.prototype.run=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{b=o}},e.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var o=b;b=this;try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o}},e.prototype.runTask=function(e,t,n){if(e.runCount++,e.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+e.zone.name+"; Execution: "+this.name+")");var r=w;w=e;var o=b;b=this;try{"macroTask"==e.type&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{b=o,w=r}},e.prototype.scheduleMicroTask=function(e,t,n,r){return this._zoneDelegate.scheduleTask(this,new g("microTask",this,e,t,n,r,null))},e.prototype.scheduleMacroTask=function(e,t,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("macroTask",this,e,t,n,r,o))},e.prototype.scheduleEventTask=function(e,t,n,r,o){return this._zoneDelegate.scheduleTask(this,new g("eventTask",this,e,t,n,r,o))},e.prototype.cancelTask=function(e){var t=this._zoneDelegate.cancelTask(this,e);return e.runCount=-1,e.cancelFn=null,t},e.__symbol__=t,e}(),h=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._hasTaskZS=n&&(n.onHasTask?n:t._hasTaskZS),this._hasTaskDlgt=n&&(n.onHasTask?t:t._hasTaskDlgt)}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new d(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this.zone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this.zone,e,t,n,r,o):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this.zone,e,t)},e.prototype.scheduleTask=function(e,t){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this.zone,e,t);if(t.scheduleFn)t.scheduleFn(t);else{if("microTask"!=t.type)throw new Error("Task is missing scheduleFn.");r(t)}return t}finally{e==this.zone&&this._updateTaskCount(t.type,1)}},e.prototype.invokeTask=function(e,t,n,r){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this.zone,e,t,n,r):t.callback.apply(n,r)}finally{e!=this.zone||"eventTask"==t.type||t.data&&t.data.isPeriodic||this._updateTaskCount(t.type,-1)}},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this.zone,e,t);else{if(!t.cancelFn)return;n=t.cancelFn(t)}return e==this.zone&&this._updateTaskCount(t.type,-1),n},e.prototype.hasTask=function(e,t){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this.zone,e,t)},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],o=n[e]=r+t;if(!(o<0||0!=r&&0!=o)){var i={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};try{this.hasTask(this.zone,i)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(e,t)}}},e}(),g=function(){function e(e,t,n,r,o,a,s){this.runCount=0,this.type=e,this.zone=t,this.source=n,this.data=o,this.scheduleFn=a,this.cancelFn=s,this.callback=r;var c=this;this.invoke=function(){S++;try{return t.runTask(c,this,arguments)}finally{1==S&&i(),S--}}}return e.prototype.toString=function(){return this.data&&"undefined"!=typeof this.data.handleId?this.data.handleId:this.toString()},e}(),v=t("setTimeout"),m=t("Promise"),y=t("then"),b=new d(null,null),w=null,k=[],T=!1,_=[],S=0,x=t("state"),E=t("value"),O="Promise.then",P=null,C=!0,I=!1,F=0,L=function(){function e(t){var n=this;if(!(n instanceof e))throw new Error("Must be an instanceof Promise.");n[x]=P,n[E]=[];try{t&&t(u(n,C),u(n,I))}catch(r){p(n,!1,r)}}return e.resolve=function(e){return p(new this(null),C,e)},e.reject=function(e){return p(new this(null),I,e)},e.race=function(e){function t(e){i&&(i=r(e))}function n(e){i&&(i=o(e))}for(var r,o,i=new this(function(e,t){r=e,o=t}),s=0,c=e;s<c.length;s++){var u=c[s];a(u)||(u=this.resolve(u)),u.then(t,n)}return i},e.all=function(e){function t(e){o&&r(e),o=null}for(var n,r,o=new this(function(e,t){n=e,r=t}),i=0,s=[],c=0,u=e;c<u.length;c++){var p=u[c];a(p)||(p=this.resolve(p)),p.then(function(e){return function(t){s[e]=t,i--,o&&!i&&n(s)}}(i),t),i++}return i||n(s),o},e.prototype.then=function(e,t){var n=new this.constructor(null),r=d.current;return this[x]==P?this[E].push(r,n,e,t):l(this,r,n,e,t),n},e.prototype["catch"]=function(e){return this.then(null,e)},e}(),j=e[t("Promise")]=e.Promise;if(e.Promise=L,j){var N=j.prototype,D=N[t("then")]=N.then;N.then=function(e,t){var n=this;return new L(function(e,t){D.call(n,e,t)}).then(e,t)}}return Promise[d.__symbol__("uncaughtPromiseErrors")]=_,e.Zone=d})("undefined"==typeof window?e:window)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){var t=[],n=e.wtf;n?t=i.split(",").map(function(e){return"HTML"+e+"Element"}).concat(a):e[s]?t.push(s):t=a;for(var r=0;r<t.length;r++){var c=e[t[r]];o.patchEventTargetMethods(c&&c.prototype)}}var o=n(3),i="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",a="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex".split(","),s="EventTarget";t.eventTargetPatch=r},function(t,n){(function(t){"use strict";function r(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function o(e,t){for(var n=e.constructor.name,o=function(o){var i=t[o],a=e[i];a&&(e[i]=function(e){return function(){return e.apply(this,r(arguments,n+"."+i))}}(a))},i=0;i<t.length;i++)o(i)}function i(e,t){var n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};delete n.writable,delete n.value;var r=t.substr(2),o="_"+t;n.set=function(e){if(this[o]&&this.removeEventListener(r,this[o]),"function"==typeof e){var t=function(t){var n;n=e.apply(this,arguments),void 0==n||n||t.preventDefault()};this[o]=t,this.addEventListener(r,t,!1)}else this[o]=null},n.get=function(){return this[o]||null},Object.defineProperty(e,t,n)}function a(e,t){var n=[];for(var r in e)"on"==r.substr(0,2)&&n.push(r);for(var o=0;o<n.length;o++)i(e,n[o]);if(t)for(var a=0;a<t.length;a++)i(e,"on"+t[a])}function s(e,t,n,r,o){var i=e[y];if(i)for(var a=0;a<i.length;a++){var s=i[a],c=s.data;if(c.handler===t&&c.useCapturing===r&&c.eventName===n)return o&&i.splice(a,1),s}return null}function c(e,t){var n=e[y];n||(n=e[y]=[]),n.push(t)}function u(e){var t=e.data;return c(t.target,e),t.target[k](t.eventName,e.invoke,t.useCapturing)}function p(e){var t=e.data;s(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.target[T](t.eventName,e.invoke,t.useCapturing)}function f(e,t){var n=t[0],r=t[1],o=t[2]||!1,i=e||m,a=null;"function"==typeof r?a=r:r&&r.handleEvent&&(a=function(e){return r.handleEvent(e)});var c=!1;try{c=r&&"[object FunctionWrapper]"===r.toString()}catch(f){return}if(!a||c)return i[k](n,r,o);var l=s(i,r,n,o,!1);if(l)return i[k](n,l.invoke,o);var d=Zone.current,h=i.constructor.name+".addEventListener:"+n,g={target:i,eventName:n,name:n,useCapturing:o,handler:r};d.scheduleEventTask(h,a,g,u,p)}function l(e,t){var n=t[0],r=t[1],o=t[2]||!1,i=e||m,a=s(i,r,n,o,!0);a?a.zone.cancelTask(a):i[T](n,r,o)}function d(e){return!(!e||!e.addEventListener)&&(v(e,b,function(){return f}),v(e,w,function(){return l}),!0)}function h(e){var t=m[e];if(t){m[e]=function(){var n=r(arguments,e);switch(n.length){case 0:this[_]=new t;break;case 1:this[_]=new t(n[0]);break;case 2:this[_]=new t(n[0],n[1]);break;case 3:this[_]=new t(n[0],n[1],n[2]);break;case 4:this[_]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}};var n,o=new t(function(){});for(n in o)"XMLHttpRequest"===e&&"responseBlob"===n||!function(t){"function"==typeof o[t]?m[e].prototype[t]=function(){return this[_][t].apply(this[_],arguments)}:Object.defineProperty(m[e].prototype,t,{set:function(n){"function"==typeof n?this[_][t]=Zone.current.wrap(n,e+"."+t):this[_][t]=n},get:function(){return this[_][t]}})}(n);for(n in t)"prototype"!==n&&t.hasOwnProperty(n)&&(m[e][n]=t[n])}}function g(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}function v(e,t,r){for(var o=e;o&&!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);!o&&e[t]&&(o=e);var i,a=n.zoneSymbol(t);return o&&!(i=o[a])&&(i=o[a]=o[t],o[t]=g(t,r(i,a,t))),i}n.zoneSymbol=Zone.__symbol__;var m="undefined"==typeof window?t:window;n.bindArguments=r,n.patchPrototype=o,n.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,n.isNode="undefined"!=typeof e&&"[object process]"==={}.toString.call(e),n.isBrowser=!n.isNode&&!n.isWebWorker&&!("undefined"==typeof window||!window.HTMLElement),n.patchProperty=i,n.patchOnProperties=a;var y=n.zoneSymbol("eventTasks"),b="addEventListener",w="removeEventListener",k=n.zoneSymbol(b),T=n.zoneSymbol(w);n.patchEventTargetMethods=d;var _=n.zoneSymbol("originalInstance");n.patchClass=h,n.createNamedFn=g,n.patchMethod=v}).call(n,function(){return this}())},function(e,t,n){"use strict";function r(){Object.defineProperty=function(e,t,n){if(i(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=a(e,t,n)),s(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=a(e,n,t[n])}),f(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=p(e,t);return i(e,t)&&(n.configurable=!1),n}}function o(e,t,n){var r=n.configurable;return n=a(e,t,n),s(e,t,n,r)}function i(e,t){return e&&e[l]&&e[l][t]}function a(e,t,n){return n.configurable=!0,n.configurable||(e[l]||u(e,l,{writable:!0,value:{}}),e[l][t]=!0),n}function s(e,t,n,r){try{return u(e,t,n)}catch(o){if(n.configurable)return"undefined"==typeof r?delete n.configurable:n.configurable=r,u(e,t,n);throw o}}var c=n(3),u=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=Object.create,l=c.zoneSymbol("unconfigurables");t.propertyPatch=r,t._redefineProperty=o},function(e,t,n){"use strict";function r(e){if(i.isBrowser&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,r){return r&&r.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(r.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(r.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),o._redefineProperty(r.prototype,e,n)):r.prototype[e]=Zone.current.wrap(r.prototype[e],t)}else r.prototype[e]&&(r.prototype[e]=Zone.current.wrap(r.prototype[e],t))}),t.apply(document,[e,r])}}}var o=n(4),i=n(3);t.registerElementPatch=r},function(e,t,n){"use strict";function r(e){if(!s.isNode){var t="undefined"!=typeof WebSocket;o()?(s.isBrowser&&s.patchOnProperties(HTMLElement.prototype,c),s.patchOnProperties(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(s.patchOnProperties(IDBIndex.prototype,null),s.patchOnProperties(IDBRequest.prototype,null),s.patchOnProperties(IDBOpenDBRequest.prototype,null),s.patchOnProperties(IDBDatabase.prototype,null),s.patchOnProperties(IDBTransaction.prototype,null),s.patchOnProperties(IDBCursor.prototype,null)),t&&s.patchOnProperties(WebSocket.prototype,null)):(i(),s.patchClass("XMLHttpRequest"),t&&a.apply(e))}}function o(){if(s.isBrowser&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{get:function(){return!0}});var t=new XMLHttpRequest,n=!!t.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{}),n}function i(){for(var e=function(e){var t=c[e],n="on"+t;document.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][u]&&(t=Zone.current.wrap(o[n],r),t[u]=o[n],o[n]=t),o=o.parentElement},!0)},t=0;t<c.length;t++)e(t)}var a=n(7),s=n(3),c="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" ");t.propertyDescriptorPatch=r;var u=s.zoneSymbol("unbound")},function(e,t,n){"use strict";function r(e){var t=e.WebSocket;e.EventTarget||o.patchEventTargetMethods(t.prototype),e.WebSocket=function(e,n){var r,i=arguments.length>1?new t(e,n):new t(e),a=Object.getOwnPropertyDescriptor(i,"onmessage");return a&&a.configurable===!1?(r=Object.create(i),["addEventListener","removeEventListener","send","close"].forEach(function(e){r[e]=function(){return i[e].apply(i,arguments)}})):r=i,o.patchOnProperties(r,["close","error","message","open"]),r};for(var n in t)e.WebSocket[n]=t[n]}var o=n(3);t.apply=r},function(e,t,n){"use strict";function r(e,t,n,r){function i(t){var n=t.data;return n.args[0]=t.invoke,n.handleId=s.apply(e,n.args),t}function a(e){return c(e.data.handleId)}var s=null,c=null;t+=r,n+=r,s=o.patchMethod(e,t,function(n){return function(o,s){if("function"==typeof s[0]){var c=Zone.current,u={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?s[1]||0:null,args:s},p=c.scheduleMacroTask(t,s[0],u,i,a);if(!p)return p;var f=p.data.handleId;return f.ref&&f.unref&&(p.ref=f.ref.bind(f),p.unref=f.unref.bind(f)),p}return n.apply(e,s)}}),c=o.patchMethod(e,n,function(t){return function(n,r){var o=r[0];o&&"string"==typeof o.type?(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&o.zone.cancelTask(o):t.apply(e,r)}})}var o=n(3);t.patchTimer=r}])}).call(this,void 0)},{}]},{},[3]);